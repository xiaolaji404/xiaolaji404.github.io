<!DOCTYPE html><html lang="en" data-default-color-scheme="auto"><head><meta charset="UTF-8"><link rel="apple-touch-icon" sizes="76x76" href="/img/xiaolaji.ico"><link rel="icon" href="/img/xiaolaji.ico"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=5,shrink-to-fit=no"><meta http-equiv="x-ua-compatible" content="ie=edge"><meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests"><meta name="theme-color" content="#2f4154"><meta name="author" content="Xiaolaji"><meta name="keywords" content=""><meta name="description" content="序列化模块 将原本的字典、列表等内容转换成一个字符串的过程就叫做序列化 序列化的目的   以某种存储形式使自定义对象持久化；   将对象从一个地方传递到另一个地方。   使程序更具维护性    python可序列化的数据类型，序列化出来之后的结果如下    Python JSON     dict object   list,tuple array   str string   int,float"><meta property="og:type" content="article"><meta property="og:title" content="Python常用模块"><meta property="og:url" content="https://xiaolaji.site/20221001/Python%E5%B8%B8%E7%94%A8%E6%A8%A1%E5%9D%97/index.html"><meta property="og:site_name" content="星陨的博客"><meta property="og:description" content="序列化模块 将原本的字典、列表等内容转换成一个字符串的过程就叫做序列化 序列化的目的   以某种存储形式使自定义对象持久化；   将对象从一个地方传递到另一个地方。   使程序更具维护性    python可序列化的数据类型，序列化出来之后的结果如下    Python JSON     dict object   list,tuple array   str string   int,float"><meta property="og:locale" content="en_US"><meta property="og:image" content="https://xiaolaji.site/Photo/Blog_Photo/index/Python%E5%B8%B8%E7%94%A8%E6%A8%A1%E5%9D%97.jpg"><meta property="article:published_time" content="2022-09-30T16:02:00.000Z"><meta property="article:modified_time" content="2023-05-27T14:09:48.000Z"><meta property="article:author" content="Xiaolaji"><meta property="article:tag" content="Python学习"><meta name="twitter:card" content="summary_large_image"><meta name="twitter:image" content="https://xiaolaji.site/Photo/Blog_Photo/index/Python%E5%B8%B8%E7%94%A8%E6%A8%A1%E5%9D%97.jpg"><meta name="referrer" content="no-referrer-when-downgrade"><title>Python常用模块 - 星陨的博客</title><link rel="stylesheet" href="https://lib.baomitu.com/twitter-bootstrap/4.6.1/css/bootstrap.min.css"><link rel="stylesheet" href="https://lib.baomitu.com/github-markdown-css/4.0.0/github-markdown.min.css"><link rel="stylesheet" href="https://lib.baomitu.com/hint.css/2.7.0/hint.min.css"><link rel="stylesheet" href="https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.css"><link rel="stylesheet" href="//at.alicdn.com/t/font_1749284_hj8rtnfg7um.css"><link rel="stylesheet" href="//at.alicdn.com/t/font_1736178_lbnruvf0jn.css"><link rel="stylesheet" href="/css/main.css"><link id="highlight-css" rel="stylesheet" href="/css/highlight.css"><link id="highlight-css-dark" rel="stylesheet" href="/css/highlight-dark.css"><script id="fluid-configs">var dntVal,Fluid=window.Fluid||{},CONFIG=(Fluid.ctx=Object.assign({},Fluid.ctx),{hostname:"xiaolaji.site",root:"/",version:"1.9.4",typing:{enable:!0,typeSpeed:70,cursorChar:"_",loop:!1,scope:[]},anchorjs:{enable:!0,element:"h1,h2,h3,h4,h5,h6",placement:"left",visible:"hover",icon:""},progressbar:{enable:!0,height_px:3,color:"#29d",options:{showSpinner:!1,trickleSpeed:100}},code_language:{enable:!0,default:"TEXT"},copy_btn:!0,image_caption:{enable:!0},image_zoom:{enable:!0,img_url_replace:["",""]},toc:{enable:!0,placement:"right",headingSelector:"h1,h2,h3,h4,h5,h6",collapseDepth:0},lazyload:{enable:!0,loading_img:"/img/loading.gif",onlypost:!1,offset_factor:2},web_analytics:{enable:!0,follow_dnt:!0,baidu:"0eb40f8e6a255579dc28fb908c7f25f5",google:5113481912,gtag:"G-LVS4PR7N6S",tencent:{sid:null,cid:null},woyaola:null,cnzz:null,leancloud:{app_id:"btVVcNFUfRauRrpzv6fApy2i-MdYXbMMI",app_key:"e4z3ib7tRXBdPHQR792zwJft",server_url:null,path:"window.location.pathname",ignore_local:!1}},search_path:"/local-search.xml"});CONFIG.web_analytics.follow_dnt&&(dntVal=navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack,Fluid.ctx.dnt=dntVal&&(dntVal.startsWith("1")||dntVal.startsWith("yes")||dntVal.startsWith("on")))</script><script src="/js/utils.js"></script><script src="/js/color-schema.js"></script><script async>var _hmt;Fluid.ctx.dnt||(_hmt=_hmt||[],function(){var t=document.createElement("script"),e=(t.src="https://hm.baidu.com/hm.js?0eb40f8e6a255579dc28fb908c7f25f5",document.getElementsByTagName("script")[0]);e.parentNode.insertBefore(t,e)}())</script><script async>Fluid.ctx.dnt||Fluid.utils.createScript("https://www.google-analytics.com/analytics.js",function(){window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","5113481912","auto"),ga("send","pageview")})</script><script async>Fluid.ctx.dnt||Fluid.utils.createScript("https://www.googletagmanager.com/gtag/js?id=G-LVS4PR7N6S",function(){function a(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],a("js",new Date),a("config","G-LVS4PR7N6S")})</script><meta name="generator" content="Hexo 6.3.0"><link rel="alternate" href="/atom.xml" title="星陨的博客" type="application/atom+xml"></head><body><header><div class="header-inner" style="height:70vh"><nav id="navbar" class="navbar fixed-top navbar-expand-lg navbar-dark scrolling-navbar"><div class="container"><a class="navbar-brand" href="/"><strong>星陨的博客</strong> </a><button id="navbar-toggler-btn" class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation"><div class="animated-icon"><span></span><span></span><span></span></div></button><div class="collapse navbar-collapse" id="navbarSupportedContent"><ul class="navbar-nav ml-auto text-center"><li class="nav-item"><a class="nav-link" href="/"><i class="iconfont icon-home-fill"></i> <span>主页</span></a></li><li class="nav-item"><a class="nav-link" href="/archives/"><i class="iconfont icon-archive-fill"></i> <span>归档</span></a></li><li class="nav-item"><a class="nav-link" href="/categories/"><i class="iconfont icon-category-fill"></i> <span>分类</span></a></li><li class="nav-item"><a class="nav-link" href="/tags/"><i class="iconfont icon-tags-fill"></i> <span>标签</span></a></li><li class="nav-item"><a class="nav-link" href="/about/"><i class="iconfont icon-user-fill"></i> <span>关于</span></a></li><li class="nav-item"><a class="nav-link" href="/links/"><i class="iconfont icon-link-fill"></i> <span>友链</span></a></li><li class="nav-item" id="search-btn"><a class="nav-link" target="_self" href="javascript:;" data-toggle="modal" data-target="#modalSearch" aria-label="Search"><i class="iconfont icon-search"></i></a></li><li class="nav-item" id="color-toggle-btn"><a class="nav-link" target="_self" href="javascript:;" aria-label="Color Toggle"><i class="iconfont icon-dark" id="color-toggle-icon"></i></a></li></ul></div></div></nav><div id="banner" class="banner" parallax="true" style="background:url(/Photo/Blog_Photo/Banner/Python%E5%B8%B8%E7%94%A8%E6%A8%A1%E5%9D%97.jpg) no-repeat center center;background-size:cover"><div class="full-bg-img"><div class="mask flex-center" style="background-color:rgba(0,0,0,.3)"><div class="banner-text text-center fade-in-up"><div class="h2"><span id="subtitle" data-typed-text="Python常用模块"></span></div><div class="mt-3"><span class="post-meta mr-2"><i class="iconfont icon-author" aria-hidden="true"></i> Xiaolaji </span><span class="post-meta"><i class="iconfont icon-date-fill" aria-hidden="true"></i> <time datetime="2022-10-01 00:02" pubdate>October 1, 2022 am</time></span></div><div class="mt-1"><span class="post-meta mr-2"><i class="iconfont icon-chart"></i> 36k words </span><span class="post-meta mr-2"><i class="iconfont icon-clock-fill"></i> 37 mins </span><span id="busuanzi_container_page_pv" style="display:none"><i class="iconfont icon-eye" aria-hidden="true"></i> <span id="busuanzi_value_page_pv"></span> views</span></div></div></div></div></div></div></header><main><div class="container-fluid nopadding-x"><div class="row nomargin-x"><div class="side-col d-none d-lg-block col-lg-2"><aside class="sidebar category-bar" style="margin-right:-1rem"><div class="category-list"><div class="category row nomargin-x"><a class="category-item list-group-item category-item-action col-10 col-md-11 col-xm-11" title="Python" id="heading-a7f5f35426b927411fc9231b56382173" role="tab" data-toggle="collapse" href="#collapse-a7f5f35426b927411fc9231b56382173" aria-expanded="true">Python <span class="list-group-count">(22)</span> <i class="iconfont icon-arrowright"></i></a><div class="category-collapse collapse show" id="collapse-a7f5f35426b927411fc9231b56382173" role="tabpanel" aria-labelledby="heading-a7f5f35426b927411fc9231b56382173"><div class="category-post-list"><a href="/20221001/Python%E4%B8%8E%E5%8D%8F%E7%A8%8B/" title="Python与协程" class="list-group-item list-group-item-action"><span class="category-post">Python与协程</span> </a><a href="/20221001/Python%E4%B8%8E%E7%BA%BF%E7%A8%8B/" title="Python与线程" class="list-group-item list-group-item-action"><span class="category-post">Python与线程</span> </a><a href="/20221001/Python%E4%B8%8E%E8%BF%9B%E7%A8%8B/" title="Python与进程" class="list-group-item list-group-item-action"><span class="category-post">Python与进程</span> </a><a href="/20220930/Python%E4%B8%AD%E7%9A%84%E5%90%84%E7%A7%8D%E5%90%84%E6%A0%B7%E7%9A%84%E6%8E%A8%E5%AF%BC%E5%BC%8F/" title="Python中的各种各样的推导式" class="list-group-item list-group-item-action"><span class="category-post">Python中的各种各样的推导式</span> </a><a href="/20221001/Python%E4%B8%AD%E7%9A%84%E5%B0%81%E8%A3%85%E4%B8%8E%E5%A4%9A%E6%80%81/" title="Python中的封装与多态" class="list-group-item list-group-item-action"><span class="category-post">Python中的封装与多态</span> </a><a href="/20220930/Python%E4%B8%AD%E7%9A%84%E6%A8%A1%E5%9D%97%E5%92%8C%E5%8C%85/" title="Python中的模块和包" class="list-group-item list-group-item-action"><span class="category-post">Python中的模块和包</span> </a><a href="/20221001/Python%E4%B8%AD%E7%9A%84%E7%BB%A7%E6%89%BF/" title="Python中的继承" class="list-group-item list-group-item-action"><span class="category-post">Python中的继承</span> </a><a href="/20220930/Python%E4%B8%AD%E7%9A%84%E8%A3%85%E9%A5%B0%E5%99%A8/" title="Python中的装饰器" class="list-group-item list-group-item-action"><span class="category-post">Python中的装饰器</span> </a><a href="/20220930/Python%E4%B8%AD%E7%9A%84%E9%80%92%E5%BD%92%E4%B8%8E%E4%BA%8C%E5%88%86%E6%9F%A5%E6%89%BE/" title="Python中的递归与二分查找" class="list-group-item list-group-item-action"><span class="category-post">Python中的递归与二分查找</span> </a><a href="/20221001/Python%E4%B8%AD%E7%B1%BB%E7%9A%84%E6%88%90%E5%91%98/" title="Python中类的成员" class="list-group-item list-group-item-action"><span class="category-post">Python中类的成员</span> </a><a href="/20220930/Python%E5%87%BD%E6%95%B0%E7%94%A8%E6%B3%95/" title="Python函数用法" class="list-group-item list-group-item-action"><span class="category-post">Python函数用法</span> </a><a href="/20221001/Python%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6%E6%9C%BA%E5%88%B6/" title="Python垃圾回收机制" class="list-group-item list-group-item-action"><span class="category-post">Python垃圾回收机制</span> </a><a href="/20221001/Python%E5%B8%B8%E7%94%A8%E6%A8%A1%E5%9D%97/" title="Python常用模块" class="list-group-item list-group-item-action active"><span class="category-post">Python常用模块</span> </a><a href="/20221001/Python%E5%BC%82%E5%B8%B8%E5%A4%84%E7%90%86/" title="Python异常处理" class="list-group-item list-group-item-action"><span class="category-post">Python异常处理</span> </a><a href="/20220905/Python%E6%93%8D%E4%BD%9C%E6%96%87%E4%BB%B6%E7%9A%84%E5%9F%BA%E6%9C%AC%E6%B5%81%E7%A8%8B/" title="Python操作文件的基本流程" class="list-group-item list-group-item-action"><span class="category-post">Python操作文件的基本流程</span> </a><a href="/20220930/Python%E7%9A%84%E5%86%85%E7%BD%AE%E5%87%BD%E6%95%B0%E5%92%8C%E5%8C%BF%E5%90%8D%E5%87%BD%E6%95%B0/" title="Python的内置函数和匿名函数" class="list-group-item list-group-item-action"><span class="category-post">Python的内置函数和匿名函数</span> </a><a href="/20221001/Python%E7%9A%84%E5%8F%8D%E5%B0%84%E4%B8%8E%E5%8F%8C%E4%B8%8B%E6%96%B9%E6%B3%95/" title="Python的反射与双下方法" class="list-group-item list-group-item-action"><span class="category-post">Python的反射与双下方法</span> </a><a href="/20220905/Python%E7%9A%84%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/" title="Python的基础知识" class="list-group-item list-group-item-action"><span class="category-post">Python的基础知识</span> </a><a href="/20221001/Python%E7%9A%84%E5%A5%97%E6%8E%A5%E5%AD%97/" title="Python的套接字" class="list-group-item list-group-item-action"><span class="category-post">Python的套接字</span> </a><a href="/20220930/Python%E7%9A%84%E8%BF%AD%E4%BB%A3%E5%99%A8%E4%B8%8E%E7%94%9F%E6%88%90%E5%99%A8/" title="Python的迭代器与生成器" class="list-group-item list-group-item-action"><span class="category-post">Python的迭代器与生成器</span> </a><a href="/20221001/Python%E7%B1%BB%E7%9A%84%E7%A9%BA%E9%97%B4%E9%97%AE%E9%A2%98%E4%BB%A5%E5%8F%8A%E7%B1%BB%E4%B9%8B%E9%97%B4%E7%9A%84%E5%85%B3%E7%B3%BB/" title="Python类的空间问题以及类之间的关系" class="list-group-item list-group-item-action"><span class="category-post">Python类的空间问题以及类之间的关系</span> </a><a href="/20221001/%E5%88%9D%E8%AF%86Python%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1/" title="初识Python面向对象" class="list-group-item list-group-item-action"><span class="category-post">初识Python面向对象</span></a></div></div></div></div></aside></div><div class="col-lg-8 nopadding-x-md"><div class="container nopadding-x-md" id="board-ctn"><div id="board"><article class="post-content mx-auto"><h1 style="display:none">Python常用模块</h1><div class="markdown-body"><h1>序列化模块</h1><p>将原本的字典、列表等内容转换成一个字符串的过程就叫做序列化</p><p><strong>序列化的目的</strong></p><ul class="lvl-0"><li class="lvl-3"><p>以某种存储形式使自定义对象持久化；</p></li><li class="lvl-2"><p>将对象从一个地方传递到另一个地方。</p></li><li class="lvl-2"><p>使程序更具维护性</p></li></ul><p><img src="image-20220707204234435.png" srcset="/img/loading.gif" lazyload alt="相互关系"></p><p>python可序列化的数据类型，序列化出来之后的结果如下</p><table><thead><tr><th>Python</th><th>JSON</th></tr></thead><tbody><tr><td>dict</td><td>object</td></tr><tr><td>list,tuple</td><td>array</td></tr><tr><td>str</td><td>string</td></tr><tr><td>int,float</td><td>number</td></tr><tr><td>True</td><td>true</td></tr><tr><td>False</td><td>false</td></tr><tr><td>None</td><td>null</td></tr></tbody></table><h2 id="json模块-很重要的">json模块(很重要的)</h2><p>Json模块提供了四个功能：dumps、dump、loads、load</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> json<br><br>dic = &#123;<span class="hljs-string">&#x27;k1&#x27;</span>:<span class="hljs-string">&#x27;v1&#x27;</span>,<span class="hljs-string">&#x27;k2&#x27;</span>:<span class="hljs-string">&#x27;v2&#x27;</span>,<span class="hljs-string">&#x27;k3&#x27;</span>:<span class="hljs-string">&#x27;v3&#x27;</span>&#125;<br>str_dic = json.dumps(dic)<span class="hljs-comment">#将Python中的类型转换为字符串</span><br><span class="hljs-comment"># 序列化：将一个字典转换成一个字符串</span><br><br><span class="hljs-built_in">print</span>(<span class="hljs-built_in">type</span>(str_dic),str_dic)<br>dic2 = json.loads(str_dic)<span class="hljs-comment">#字符串转回原本的类型</span><br><span class="hljs-built_in">print</span>(<span class="hljs-built_in">type</span>(dic2),dic2)<br><span class="hljs-comment"># 反序列化：将一个字符串格式的字典转换成一个字典</span><br><br>list_dic = [<span class="hljs-number">1</span>,[<span class="hljs-string">&#x27;a&#x27;</span>,<span class="hljs-string">&#x27;b&#x27;</span>,<span class="hljs-string">&#x27;c&#x27;</span>],<span class="hljs-number">3</span>,&#123;<span class="hljs-string">&#x27;k1&#x27;</span>:<span class="hljs-string">&#x27;v1&#x27;</span>,<span class="hljs-string">&#x27;k2&#x27;</span>:<span class="hljs-string">&#x27;v2&#x27;</span>&#125;]<br>str_dic = json.dumps(list_dic)<br><br><span class="hljs-built_in">print</span>(<span class="hljs-built_in">type</span>(str_dic),str_dic)<br>list_dic2 = json.loads(str_dic)<br><span class="hljs-built_in">print</span>(<span class="hljs-built_in">type</span>(list_dic2),list_dic2)<br></code></pre></td></tr></table></figure><p>json.dumps的参数：</p><table><thead><tr><th>Skipkeys</th><th>1,默认值是False，如果dict的keys内的数据不是python的基本类型,2,设置为 False时，就会报TypeError的错误。此时设置成True，则会跳过这类key，3,当 它为True的时候，所有非ASCII码字符显示为\uXXXX序列，只需在dump时将 ensure_ascii设置为False即可，此时存入json的中文即可正常显示。</th></tr></thead><tbody><tr><td>indent</td><td>是一个非负的整型，如果是0就是顶格分行显示，如果为空就是一行最紧凑显示， 否则会换行且按照indent的数值显示前面的空白分行显示，这样打印出来的json 数据也叫pretty-printed json</td></tr><tr><td>ensure_ascii</td><td>当它为True的时候，所有非ASCII码字符显示为\uXXXX序列，只需在dump时将 ensure_ascii设置为False即可，此时存入json的中文即可正常显示。</td></tr><tr><td>separators</td><td>分隔符，实际上是(item_separator, dict_separator)的一个元组，默认的就是 (‘,’,’:’)；这表示dictionary内keys之间用“,”隔开，而KEY和value之间用“：”隔开。</td></tr><tr><td>sort_keys</td><td>将数据根据keys的值进行排序</td></tr></tbody></table><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> json<br><br>data = &#123;<span class="hljs-string">&#x27;name&#x27;</span>:<span class="hljs-string">&#x27;马牛逼&#x27;</span>,<span class="hljs-string">&#x27;sex&#x27;</span>:<span class="hljs-string">&#x27;female&#x27;</span>,<span class="hljs-string">&#x27;age&#x27;</span>:<span class="hljs-number">88</span>&#125;<br>json_dic2 = json.dumps(data,sort_keys=<span class="hljs-literal">True</span>,indent=<span class="hljs-number">2</span>,separators=<br>(<span class="hljs-string">&#x27;,&#x27;</span>,<span class="hljs-string">&#x27;:&#x27;</span>),ensure_ascii=<span class="hljs-literal">False</span>)<br><span class="hljs-built_in">print</span>(json_dic2)<br></code></pre></td></tr></table></figure><p>json.dump和json.load不常用，主要是针对文件操作进行序列化和反序列化</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs python">序列化：<br><span class="hljs-keyword">import</span> json<br>v = &#123;<span class="hljs-string">&#x27;k1&#x27;</span>:<span class="hljs-string">&#x27;yh&#x27;</span>,<span class="hljs-string">&#x27;k2&#x27;</span>:<span class="hljs-string">&#x27;小马过河&#x27;</span>&#125;<br>f = <span class="hljs-built_in">open</span>(<span class="hljs-string">&#x27;xiaoma.txt&#x27;</span>,mode=<span class="hljs-string">&#x27;w+&#x27;</span>,encoding=<span class="hljs-string">&#x27;utf-8&#x27;</span>) <span class="hljs-comment">#文件不存在就会生成</span><br>val = json.dump(v,f,ensure_ascii=<span class="hljs-literal">False</span>)<br>data=f.read()<br><span class="hljs-built_in">print</span>(<span class="hljs-built_in">type</span>(data))<br><span class="hljs-built_in">print</span>(val)<br>f.close()<br>----------------结果：<br>&lt;<span class="hljs-keyword">class</span> <span class="hljs-string">&#x27;str&#x27;</span>&gt;<br><span class="hljs-literal">None</span><br><span class="hljs-comment">#dump将内容序列化，并写入打开的文件中。</span><br><br>反序列化：<br><span class="hljs-keyword">import</span> json<br>f = <span class="hljs-built_in">open</span>(<span class="hljs-string">&#x27;xiaoma.txt&#x27;</span>,mode=<span class="hljs-string">&#x27;r&#x27;</span>,encoding=<span class="hljs-string">&#x27;utf-8&#x27;</span>)<br>data = json.load(f)<br>f.close()<br><span class="hljs-built_in">print</span>(data,<span class="hljs-built_in">type</span>(data))<br>---------------结果:<br>&#123;<span class="hljs-string">&#x27;k1&#x27;</span>: <span class="hljs-string">&#x27;yh&#x27;</span>, <span class="hljs-string">&#x27;k2&#x27;</span>: <span class="hljs-string">&#x27;小马过河&#x27;</span>&#125; &lt;<span class="hljs-keyword">class</span> <span class="hljs-string">&#x27;dict&#x27;</span>&gt;<br></code></pre></td></tr></table></figure><h2 id="pickle模块">pickle模块</h2><table><thead><tr><th>json</th><th>用于字符串 和 python数据类型间进行转换</th></tr></thead><tbody><tr><td>pickle</td><td>用于python特有的类型 和 python的数据类型间进行转换</td></tr></tbody></table><p>pickle模块提供了四个功能：dumps、dump(序列化，存）、loads（反序列化，读）、load</p><p>不仅可以序列化字典，列表…可以把python中任意的数据类型序列化</p><p>json模块和picle模块都有 dumps、dump、loads、load四种方法，而且用法一样。</p><p>不同的是json模块序列化出来的是通用格式，其它编程语言都认识，就是普通的字符串，</p><p>而picle模块序列化出来的只有python可以认识，其他编程语言不认识的，表现为乱码</p><p>不过picle可以序列化函数，但是其他文件想用该函数，在该文件中需要有该文件的定义（定义和参数必 须相同，内容可以不同）</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> pickle<br>dic = &#123;<span class="hljs-string">&#x27;k1&#x27;</span>:<span class="hljs-string">&#x27;v1&#x27;</span>,<span class="hljs-string">&#x27;k2&#x27;</span>:<span class="hljs-string">&#x27;v2&#x27;</span>,<span class="hljs-string">&#x27;k3&#x27;</span>:<span class="hljs-string">&#x27;v3&#x27;</span>&#125;<br>str_dic = pickle.dumps(dic)<br><span class="hljs-built_in">print</span>(str_dic)<br><br>dic2 = pickle.loads(str_dic)<br><span class="hljs-built_in">print</span>(dic2)<br><br><span class="hljs-keyword">import</span> time<br>struct_time = time.localtime(<span class="hljs-number">1000000000</span>)<br><span class="hljs-built_in">print</span>(struct_time)<br>f = <span class="hljs-built_in">open</span>(<span class="hljs-string">&#x27;pickle_file&#x27;</span>,<span class="hljs-string">&#x27;wb&#x27;</span>)<br>pickle.dump(struct_time,f)<br>f.close()<br><br>f = <span class="hljs-built_in">open</span>(<span class="hljs-string">&#x27;pickle_file&#x27;</span>,<span class="hljs-string">&#x27;rb&#x27;</span>)<br>struct_time2 = pickle.load(f)<br><span class="hljs-built_in">print</span>(struct_time2.tm_year)<br></code></pre></td></tr></table></figure><h2 id="shelve模块">shelve模块</h2><p>shelve也是python提供给我们的序列化工具，比pickle用起来更简单一些。</p><p>shelve只提供给我们一个open方法，是用key来访问的，使用起来和字典类似。</p><p>参考博客</p><p><a target="_blank" rel="noopener" href="https://www.cnblogs.com/sui776265233/p/9225164.html">https://www.cnblogs.com/sui776265233/p/9225164.html</a></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> shelve<br>f = shelve.<span class="hljs-built_in">open</span>(<span class="hljs-string">&#x27;shelve_file&#x27;</span>)<br>f[<span class="hljs-string">&#x27;key&#x27;</span>] = &#123;<span class="hljs-string">&#x27;int&#x27;</span>:<span class="hljs-number">10</span>,<span class="hljs-string">&#x27;str&#x27;</span>:<span class="hljs-string">&#x27;hello&#x27;</span>,<span class="hljs-string">&#x27;float&#x27;</span>:<span class="hljs-number">0.123</span>&#125;<br>f.close()<br><br>f1 = shelve.<span class="hljs-built_in">open</span>(<span class="hljs-string">&#x27;shelve_file&#x27;</span>)<br>ret = f1[<span class="hljs-string">&#x27;key&#x27;</span>]<br>f1.close()<br><span class="hljs-built_in">print</span>(ret)<br></code></pre></td></tr></table></figure><p>这个模块有个限制，它不支持多个应用同一时间往同一个DB进行写操作。所以当我们知道我们的应用如 果只进行读操作，我们可以让shelve通过只读方式打开DB</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> shelve<br>f1 = shelve.<span class="hljs-built_in">open</span>(<span class="hljs-string">&#x27;shelve_file&#x27;</span>,flag=<span class="hljs-string">&#x27;r&#x27;</span>)<br>ret = f1[<span class="hljs-string">&#x27;key&#x27;</span>]<br>f1.close()<br><span class="hljs-built_in">print</span>(ret)<br></code></pre></td></tr></table></figure><p>由于shelve在默认情况下是不会记录待持久化对象的任何修改的，所以我们在shelve.open()时候需要修 改默认参数，否则对象的修改不会保存。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> shelve<br>f1 = shelve.<span class="hljs-built_in">open</span>(<span class="hljs-string">&#x27;shelve_file&#x27;</span>)<br><span class="hljs-built_in">print</span>(f1[<span class="hljs-string">&#x27;key&#x27;</span>])<br>f1[<span class="hljs-string">&#x27;key&#x27;</span>][<span class="hljs-string">&#x27;k1&#x27;</span>] = <span class="hljs-string">&#x27;v1&#x27;</span><br><span class="hljs-built_in">print</span>(f1[<span class="hljs-string">&#x27;key&#x27;</span>])<br>f1.close()<br><br>f2 = shelve.<span class="hljs-built_in">open</span>(<span class="hljs-string">&#x27;shelve_file&#x27;</span>,writeback=<span class="hljs-literal">True</span>) <span class="hljs-comment">#开启后才能写生效</span><br><br>f2[<span class="hljs-string">&#x27;key&#x27;</span>][<span class="hljs-string">&#x27;k1&#x27;</span>] = <span class="hljs-string">&#x27;hello&#x27;</span><br><span class="hljs-built_in">print</span>(f2[<span class="hljs-string">&#x27;key&#x27;</span>])<br>f2.close()<br></code></pre></td></tr></table></figure><p>使用shelve模块实现简单的数据库</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># 简单的数据库</span><br><br><span class="hljs-keyword">import</span> sys,shelve<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">print_help</span>():<br><span class="hljs-string">&#x27;存储（增加）、查找、更新（修改）、循环打印、删除、退出、帮助&#x27;</span><br>	<span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;The available commons are: &#x27;</span>)<br>	<span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;store : Stores information about a person&#x27;</span>)<br>	<span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;lookup : Looks up a person from ID numbers&#x27;</span>)<br>	<span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;update : Update a person&#x27;s information from ID number&quot;</span>)<br>	<span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;print_all: Print all informations&#x27;</span>)<br>	<span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;delete : Delete a person&#x27;s information from ID number&quot;</span>)<br>	<span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;quit : Save changes and exit&#x27;</span>)<br>	<span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;? : Print this message&#x27;</span>)<br>	<br><span class="hljs-keyword">def</span> <span class="hljs-title function_">store_people</span>(<span class="hljs-params">db</span>):<br>	pid = <span class="hljs-built_in">input</span>(<span class="hljs-string">&#x27;Please enter a unique ID number: &#x27;</span>)<br>	person = &#123;&#125;<br>	person[<span class="hljs-string">&#x27;name&#x27;</span>] = <span class="hljs-built_in">input</span>(<span class="hljs-string">&#x27;Please enter the name: &#x27;</span>)<br>	person[<span class="hljs-string">&#x27;age&#x27;</span>] = <span class="hljs-built_in">input</span>(<span class="hljs-string">&#x27;Please enter the age: &#x27;</span>)<br>	person[<span class="hljs-string">&#x27;phone&#x27;</span>] = <span class="hljs-built_in">input</span>(<span class="hljs-string">&#x27;Please enter the phone: &#x27;</span>)<br>	db[pid] = person<br>	<span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;Store information: pid is %s, information is %s&quot;</span> % (pid, person))<br>	<br><span class="hljs-keyword">def</span> <span class="hljs-title function_">lookup_people</span>(<span class="hljs-params">db</span>):<br>	pid = <span class="hljs-built_in">input</span>(<span class="hljs-string">&#x27;Please enter the number: &#x27;</span>)<br>	field = <span class="hljs-built_in">input</span>(<span class="hljs-string">&#x27;What would you like to know? (name, age, phone) &#x27;</span>)<br>	<span class="hljs-keyword">if</span> pid <span class="hljs-keyword">in</span> db.keys():<br>		value = db[pid][field]<br>		<span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;Pid %s&#x27;s %s is %s&quot;</span> % (pid, field, value))<br>	<span class="hljs-keyword">else</span>:<br>		<span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;Not found this number&#x27;</span>)<br>		<br><span class="hljs-keyword">def</span> <span class="hljs-title function_">update_people</span>(<span class="hljs-params">db</span>):<br>	pid = <span class="hljs-built_in">input</span>(<span class="hljs-string">&#x27;Please enter the number: &#x27;</span>)<br>	field = <span class="hljs-built_in">input</span>(<span class="hljs-string">&#x27;What would you like to update? (name, age, phone) &#x27;</span>)<br>	newvalue = <span class="hljs-built_in">input</span>(<span class="hljs-string">&#x27;Enter the new information: &#x27;</span>)<br>	<span class="hljs-keyword">if</span> pid <span class="hljs-keyword">in</span> db.keys():<br>		value = db[pid]<br>		value[field] = newvalue<br>		<span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;Pid %s&#x27;s %s update information is %s&quot;</span> % (pid, field,newvalue))<br>	<span class="hljs-keyword">else</span>:<br>		<span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;Not found this number, can&#x27;t update&quot;</span>)<br>		<br><span class="hljs-keyword">def</span> <span class="hljs-title function_">delete_people</span>(<span class="hljs-params">db</span>):<br>	pid = <span class="hljs-built_in">input</span>(<span class="hljs-string">&#x27;Please enter the number: &#x27;</span>)<br>	<span class="hljs-keyword">if</span> pid <span class="hljs-keyword">in</span> db.keys():<br>		<span class="hljs-keyword">del</span> db[pid]<br>		<span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;pid %s&#x27;s information delete done&quot;</span> % pid)<br>	<span class="hljs-keyword">else</span>:<br>		<span class="hljs-built_in">print</span>( <span class="hljs-string">&quot;Not found this number, can&#x27;t delete&quot;</span>)<br>		<br><span class="hljs-keyword">def</span> <span class="hljs-title function_">print_all_people</span>(<span class="hljs-params">db</span>):<br>	<span class="hljs-built_in">print</span>( <span class="hljs-string">&#x27;All information are: &#x27;</span>)<br>	<span class="hljs-keyword">for</span> key, value <span class="hljs-keyword">in</span> db.items():<br>		<span class="hljs-built_in">print</span>(key, value)<br>		<br><span class="hljs-keyword">def</span> <span class="hljs-title function_">enter_cmd</span>():<br>	cmd = <span class="hljs-built_in">input</span>(<span class="hljs-string">&#x27;Please enter the cmd(? for help): &#x27;</span>)<br>	cmd = cmd.strip().lower()<br>	<span class="hljs-keyword">return</span> cmd<br>	<br><span class="hljs-keyword">def</span> <span class="hljs-title function_">main</span>():<br>	database = shelve.<span class="hljs-built_in">open</span>(<span class="hljs-string">&#x27;database201803.dat&#x27;</span>, writeback=<span class="hljs-literal">True</span>)<br>	<span class="hljs-keyword">try</span>:<br>		<span class="hljs-keyword">while</span> <span class="hljs-literal">True</span>:<br>			cmd = enter_cmd()<br>			<span class="hljs-keyword">if</span> cmd == <span class="hljs-string">&#x27;store&#x27;</span>:<br>				store_people(database)<br>			<span class="hljs-keyword">elif</span> cmd == <span class="hljs-string">&#x27;lookup&#x27;</span>:<br>				lookup_people(database)<br>			<span class="hljs-keyword">elif</span> cmd == <span class="hljs-string">&#x27;update&#x27;</span>:<br>				update_people(database)<br>			<span class="hljs-keyword">elif</span> cmd == <span class="hljs-string">&#x27;print_all&#x27;</span>:<br>				print_all_people(database)<br>			<span class="hljs-keyword">elif</span> cmd == <span class="hljs-string">&#x27;delete&#x27;</span>:<br>				delete_people(database)<br>			<span class="hljs-keyword">elif</span> cmd == <span class="hljs-string">&#x27;?&#x27;</span>:<br>				print_help()<br>			<span class="hljs-keyword">elif</span> cmd == <span class="hljs-string">&#x27;quit&#x27;</span>:<br>				<span class="hljs-keyword">return</span><br>	<span class="hljs-keyword">finally</span>:<br>		database.close()<br><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&#x27;__main__&#x27;</span>:<br>	main()<br></code></pre></td></tr></table></figure><h2 id="hashlib模块（用于加密提供了大量的加密算法）">hashlib模块（用于加密提供了大量的加密算法）</h2><p>Python的<code>hashlib</code>提供了常见的摘要算法，如MD5，SHA1等等。</p><p>什么是摘要算法呢？摘要算法又称哈希算法、散列算法。它通过一个函数，把任意长度的数据转换为一 个长度固定的数据串（通常用16进制的字符串表示）。</p><p>摘要算法就是通过摘要函数f()对任意长度的数据data计算出固定长度的摘要digest，目的是为了发现原 始数据是否被人篡改过。</p><p>摘要算法之所以能指出数据是否被篡改过，就是因为摘要函数是一个单向函数，计算f(data)很容易，但 通过digest反推data却非常困难。而且，对原始数据做一个bit的修改，都会导致计算出的摘要完全不同。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> hashlib<br><br>md5 = hashlib.md5()<br>md5.update(<span class="hljs-string">&#x27;how to use md5 in python hashlib?&#x27;</span>.encode(<span class="hljs-string">&#x27;utf-8&#x27;</span>))<br><span class="hljs-built_in">print</span>(md5.hexdigest())<br></code></pre></td></tr></table></figure><p>MD5是最常见的摘要算法，速度很快，生成结果是固定的128 bit字节，通常用一个32位的16进制字符 串表示。另一种常见的摘要算法是SHA1，调用SHA1和调用MD5完全类似</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> hashlib<br><br>sha1 = hashlib.sha1()<br>sha1.update(<span class="hljs-string">&#x27;how to use md5 &#x27;</span>.encode(<span class="hljs-string">&#x27;utf-8&#x27;</span>))<br>sha1.update(<span class="hljs-string">&#x27;in python hashlib?&#x27;</span>.encode(<span class="hljs-string">&#x27;utf-8&#x27;</span>))<br><span class="hljs-built_in">print</span>(sha1.hexdigest())<br></code></pre></td></tr></table></figure><p>利用<code>hashlib</code>将我们的注册登录模块保存的密码进行加密</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment">#注册部分修改</span><br>	<span class="hljs-keyword">with</span> <span class="hljs-built_in">open</span>(<span class="hljs-string">&quot;db.txt&quot;</span>, <span class="hljs-string">&quot;a&quot;</span>, encoding=<span class="hljs-string">&quot;utf-8&quot;</span>) <span class="hljs-keyword">as</span> write_file:<br>		md5=hashlib.md5()<br>		md5.update(user_name.encode(<span class="hljs-string">&#x27;utf-8&#x27;</span>))<br>		md5.update(user_password.encode(<span class="hljs-string">&#x27;utf-8&#x27;</span>))<br>		user_password_md5=md5.hexdigest()<br>		user_info = user_name + <span class="hljs-string">&quot;:&quot;</span> + user_password_md5 + <span class="hljs-string">&quot;\n</span><br><span class="hljs-string">		write_file.write(user_info)</span><br><span class="hljs-string">		print(&quot;</span>注册成功<span class="hljs-string">&quot;)</span><br><span class="hljs-string">        </span><br><span class="hljs-string">#登录部分修改</span><br><span class="hljs-string">	while True:</span><br><span class="hljs-string">		# 确保用户密码正确</span><br><span class="hljs-string">		user_password = input(&quot;</span>请输入登录密码；\n<span class="hljs-string">&quot;)</span><br><span class="hljs-string">		flag2 = False</span><br><span class="hljs-string">		for dict4 in list1:</span><br><span class="hljs-string">			md5 =hashlib.md5()</span><br><span class="hljs-string">			md5.update(user_name.encode(&#x27;utf-8&#x27;))</span><br><span class="hljs-string">			md5.update(user_password.encode(&#x27;utf-8&#x27;))</span><br><span class="hljs-string">			user_password_md5=md5.hexdigest()</span><br><span class="hljs-string">			if dict4[&quot;</span>username<span class="hljs-string">&quot;] == user_name and dict4[&quot;</span>password<span class="hljs-string">&quot;] ==user_password_md5:</span><br><span class="hljs-string">				flag2 = True</span><br><span class="hljs-string"></span><br></code></pre></td></tr></table></figure><h2 id="摘要算法应用">摘要算法应用</h2><p>任何允许用户登录的网站都会存储用户登录的用户名和口令。如何存储用户名和口令呢？方法是存到数据库表中</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs python">name    | password<br>--------+----------<br>michael | <span class="hljs-number">123456</span><br>bob     | abc999<br>alice   | alice2008<br></code></pre></td></tr></table></figure><p>如果使用md5来将保护密码那么就是这样</p><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs asciidoc"><span class="hljs-section">username | password</span><br><span class="hljs-section">---------+---------------------------------</span><br>michael  | e10adc3949ba59abbe56e057f20f883e<br>bob      | 878ef96e86145580c38c87f0410ad153<br>alice    | 99b1c2188db85afee403b1536010c2c9<br></code></pre></td></tr></table></figure><p>有很多md5撞库工具，可以轻松的将简单密码给碰撞出来</p><p>所以，要确保存储的用户口令不是那些已经被计算出来的常用口令的MD5，这一方法通过对原始口令加 一个复杂字符串来实现，俗称“加盐</p><p>经过Salt处理的MD5口令，只要Salt不被黑客知道，即使用户输入简单口令，也很难通过MD5反推明文口令</p><p>但是如果有两个用户都使用了相同的简单口令比如123456，在数据库中，将存储两条相同的MD5值， 这说明这两个用户的口令是一样的。</p><p>如果假定用户无法修改登录名，就可以通过把登录名作为Salt的一部分来计算MD5，从而实现相同口令 的用户也存储不同的MD5。</p><h1>configparser模块（专门对配置文件的修改）</h1><p>该模块适用于配置文件的格式与windows ini文件类似，可以包含一个或多个节（section），每个节可 以有多个参数（键=值）。</p><p>常见的文档格式</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs python">[default]<br>ServerAliveInterval = <span class="hljs-number">45</span><br>Compression = yes<br>CompressionLevel = <span class="hljs-number">9</span><br>ForwardX11 = yes<br><br>[bitbucket.org]<br>User = hg<br><br>[topsecret.server.com]<br>Port = <span class="hljs-number">50022</span><br>ForwardX11 = no<br></code></pre></td></tr></table></figure><p>使用python生成一个这样的文件</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> configparser<br><br>conf = configparser.ConfigParser()<br><br>conf[<span class="hljs-string">&#x27;default&#x27;</span>] = &#123;<span class="hljs-string">&#x27;ServerAliveInterval&#x27;</span>:<span class="hljs-string">&#x27;45&#x27;</span>,<br>				 <span class="hljs-string">&#x27;Compression&#x27;</span>:<span class="hljs-string">&#x27;yes&#x27;</span>,<br>				 <span class="hljs-string">&#x27;CompressionLevel&#x27;</span>:<span class="hljs-string">&#x27;9&#x27;</span>,<br>				 <span class="hljs-string">&#x27;ForwardX11&#x27;</span>:<span class="hljs-string">&#x27;yes&#x27;</span><br>				 &#125;<br>conf[<span class="hljs-string">&#x27;bitbucket.org&#x27;</span>] = &#123;<span class="hljs-string">&#x27;User&#x27;</span>:<span class="hljs-string">&#x27;hg&#x27;</span>&#125;<br>conf[<span class="hljs-string">&#x27;topsecret.server.com&#x27;</span>] = &#123;<span class="hljs-string">&#x27;Port&#x27;</span>:<span class="hljs-string">&#x27;50022&#x27;</span>,<br>							 <span class="hljs-string">&#x27;ForwardX11&#x27;</span>:<span class="hljs-string">&#x27;no&#x27;</span><br>                               &#125;<br><span class="hljs-keyword">with</span> <span class="hljs-built_in">open</span>(<span class="hljs-string">&#x27;config&#x27;</span>,<span class="hljs-string">&#x27;w&#x27;</span>) <span class="hljs-keyword">as</span> config:<br>	conf.write(config)<br></code></pre></td></tr></table></figure><p>查找配置文件中的所有section和option</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> configparser<br><br>conf = configparser.ConfigParser()<br>conf.read(<span class="hljs-string">&#x27;config&#x27;</span>)<br><br>secs = conf.sections()<br><span class="hljs-built_in">print</span>(secs)<br><span class="hljs-keyword">for</span> sec <span class="hljs-keyword">in</span> secs:<br>	<span class="hljs-built_in">print</span>(sec,conf.options(sec))<br></code></pre></td></tr></table></figure><p>查找配置文件中option的值</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> configparser<br><br>conf = configparser.ConfigParser()<br>conf.read(<span class="hljs-string">&#x27;config&#x27;</span>)<br><br>secs = conf.sections()<br><span class="hljs-built_in">print</span>(secs)<br><span class="hljs-keyword">for</span> sec <span class="hljs-keyword">in</span> secs:<br>	<span class="hljs-built_in">print</span>(sec,conf.options(sec))<br><br>serveraliveinterval=conf.get(<span class="hljs-string">&#x27;default&#x27;</span>,<span class="hljs-string">&#x27;serveraliveinterval&#x27;</span>)<br><span class="hljs-built_in">print</span>(serveraliveinterval)<br>user=conf.get(<span class="hljs-string">&#x27;bitbucket.org&#x27;</span>,<span class="hljs-string">&#x27;user&#x27;</span>)<br><span class="hljs-built_in">print</span>(user)<br></code></pre></td></tr></table></figure><p>修改配置文件</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> configparser<br><br>conf = configparser.ConfigParser()<br>conf.read(<span class="hljs-string">&#x27;config&#x27;</span>)<br><br><span class="hljs-comment"># 使用has_section来判断是否有这个section配置项，option可以使用has_option方法来判断是否存在</span><br><span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> conf.has_section(<span class="hljs-string">&#x27;ABC&#x27;</span>):<br>	<span class="hljs-comment"># 如果没有则添加这个section</span><br>	conf.add_section(<span class="hljs-string">&quot;ABC&quot;</span>)<br>	<span class="hljs-comment"># 并在该section下添加一个名叫abc的option项</span><br>	conf.<span class="hljs-built_in">set</span>(<span class="hljs-string">&quot;ABC&quot;</span>, <span class="hljs-string">&quot;abc&quot;</span>, <span class="hljs-string">&quot;123&quot;</span>)<br>conf.<span class="hljs-built_in">set</span>(<span class="hljs-string">&#x27;topsecret.server.com&#x27;</span>,<span class="hljs-string">&#x27;ip&#x27;</span>,<span class="hljs-string">&#x27;192.168.1.1&#x27;</span>)<br>	<span class="hljs-comment"># 将这些修改写入到配置文件中</span><br><span class="hljs-keyword">with</span> <span class="hljs-built_in">open</span>(<span class="hljs-string">&#x27;config&#x27;</span>, <span class="hljs-string">&#x27;w+&#x27;</span>) <span class="hljs-keyword">as</span> f:<br>	conf.write(f)<br></code></pre></td></tr></table></figure><p>删除某些section和option</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> configparser<br><br>conf = configparser.ConfigParser()<br>conf.read(<span class="hljs-string">&#x27;config&#x27;</span>)<br><span class="hljs-comment"># 删除ABC section，包含下面所有的option都会一并删除</span><br>conf.remove_section(<span class="hljs-string">&#x27;ABC&#x27;</span>)<br><span class="hljs-comment"># 删除topsecret.server.com下的ip ，其他option不会受影响</span><br>conf.remove_option(<span class="hljs-string">&#x27;topsecret.server.com&#x27;</span>, <span class="hljs-string">&#x27;ip&#x27;</span>)<br><br><span class="hljs-keyword">with</span> <span class="hljs-built_in">open</span>(<span class="hljs-string">&#x27;config&#x27;</span>, <span class="hljs-string">&#x27;w+&#x27;</span>) <span class="hljs-keyword">as</span> f:<br>conf.write(f)<br></code></pre></td></tr></table></figure><p>查找配置文件中option的值</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> configparser<br><br>conf = configparser.ConfigParser()<br>conf.read(<span class="hljs-string">&#x27;config&#x27;</span>)<br><br>secs = conf.sections()<br><span class="hljs-built_in">print</span>(secs)<br><span class="hljs-keyword">for</span> sec <span class="hljs-keyword">in</span> secs:<br>	<span class="hljs-built_in">print</span>(sec,conf.options(sec))<br>	<br>serveraliveinterval=conf.get(<span class="hljs-string">&#x27;default&#x27;</span>,<span class="hljs-string">&#x27;serveraliveinterval&#x27;</span>)<br><span class="hljs-built_in">print</span>(serveraliveinterval)<br>user=conf.get(<span class="hljs-string">&#x27;bitbucket.org&#x27;</span>,<span class="hljs-string">&#x27;user&#x27;</span>)<br><span class="hljs-built_in">print</span>(user)<br></code></pre></td></tr></table></figure><p>修改配置文件</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> configparser<br><br>conf = configparser.ConfigParser()<br>conf.read(<span class="hljs-string">&#x27;config&#x27;</span>)<br><br><span class="hljs-comment"># 使用has_section来判断是否有这个section配置项，option可以使用has_option方法来判断是否存在</span><br><br><span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> conf.has_section(<span class="hljs-string">&#x27;ABC&#x27;</span>):<br>	<span class="hljs-comment"># 如果没有则添加这个section</span><br>	conf.add_section(<span class="hljs-string">&quot;ABC&quot;</span>)<br>	<span class="hljs-comment"># 并在该section下添加一个名叫abc的option项</span><br>	conf.<span class="hljs-built_in">set</span>(<span class="hljs-string">&quot;ABC&quot;</span>, <span class="hljs-string">&quot;abc&quot;</span>, <span class="hljs-string">&quot;123&quot;</span>)<br>conf.<span class="hljs-built_in">set</span>(<span class="hljs-string">&#x27;topsecret.server.com&#x27;</span>,<span class="hljs-string">&#x27;ip&#x27;</span>,<span class="hljs-string">&#x27;192.168.1.1&#x27;</span>)<br>	<span class="hljs-comment"># 将这些修改写入到配置文件中</span><br><span class="hljs-keyword">with</span> <span class="hljs-built_in">open</span>(<span class="hljs-string">&#x27;config&#x27;</span>, <span class="hljs-string">&#x27;w+&#x27;</span>) <span class="hljs-keyword">as</span> f:<br>	conf.write(f)<br></code></pre></td></tr></table></figure><p>删除某些section和option</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> configparser<br><br>conf = configparser.ConfigParser()<br>conf.read(<span class="hljs-string">&#x27;config&#x27;</span>)<br><span class="hljs-comment"># 删除ABC section，包含下面所有的option都会一并删除</span><br>conf.remove_section(<span class="hljs-string">&#x27;ABC&#x27;</span>)<br><span class="hljs-comment"># 删除topsecret.server.com下的ip ，其他option不会受影响</span><br>conf.remove_option(<span class="hljs-string">&#x27;topsecret.server.com&#x27;</span>, <span class="hljs-string">&#x27;ip&#x27;</span>)<br><br><span class="hljs-keyword">with</span> <span class="hljs-built_in">open</span>(<span class="hljs-string">&#x27;config&#x27;</span>, <span class="hljs-string">&#x27;w+&#x27;</span>) <span class="hljs-keyword">as</span> f:<br>	conf.write(f)<br></code></pre></td></tr></table></figure><h1>logging模块（记录程序运行的日志模块）</h1><p>参考博客：</p><p><a target="_blank" rel="noopener" href="https://blog.csdn.net/pansaky/article/details/90710751">https://blog.csdn.net/pansaky/article/details/90710751</a></p><h2 id="函数式简单配置">函数式简单配置</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> logging<br><span class="hljs-comment">#日志的五个等级</span><br>logging.debug(<span class="hljs-string">&#x27;debug message&#x27;</span>)<br>logging.info(<span class="hljs-string">&#x27;info message&#x27;</span>)<br>logging.warning(<span class="hljs-string">&#x27;warning message&#x27;</span>)<br>logging.error(<span class="hljs-string">&#x27;error message&#x27;</span>)<br>logging.critical(<span class="hljs-string">&#x27;critical message&#x27;</span>)<br></code></pre></td></tr></table></figure><p>默认情况下Python的logging模块将日志打印到了标准输出中，且只显示了大于等于WARNING级别的日 志，这说明默认的日志级别设置为WARNING（日志级别等级CRITICAL &gt; ERROR &gt; WARNING &gt; INFO &gt; DEBUG），默认的日志格式为日志级别：Logger名称：用户输出消息。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> logging<br><br>logging.basicConfig(level=logging.DEBUG,<br>				  <span class="hljs-built_in">format</span>=<span class="hljs-string">&#x27;%(asctime)s %(filename)s[line:%(lineno)d] %</span><br><span class="hljs-string">(levelname)s %(message)s&#x27;</span>,<br>					datefmt=<span class="hljs-string">&#x27;%a, %d %b %Y %H:%M:%S&#x27;</span>,<br>					filename=<span class="hljs-string">&#x27;test.log&#x27;</span>,<br>					filemode=<span class="hljs-string">&#x27;w&#x27;</span>)<br>					<br>logging.debug(<span class="hljs-string">&#x27;debug message&#x27;</span>)<br>logging.info(<span class="hljs-string">&#x27;info message&#x27;</span>)<br>logging.warning(<span class="hljs-string">&#x27;warning message&#x27;</span>)<br>logging.error(<span class="hljs-string">&#x27;error message&#x27;</span>)<br>logging.critical(<span class="hljs-string">&#x27;critical message&#x27;</span>)<br></code></pre></td></tr></table></figure><p>参数解释</p><ul class="lvl-0"><li class="lvl-2"><p>ogging.basicConfig()函数中可通过具体参数来更改logging模块默认行为，可用参数有：</p></li><li class="lvl-2"><p>filename：用指定的文件名创建FiledHandler，这样日志会被存储在指定的文件中。</p></li><li class="lvl-2"><p>filemode：文件打开方式，在指定了filename时使用这个参数，默认值为“a”还可指定为“w”。</p></li><li class="lvl-2"><p>format：指定handler使用的日志显示格式。</p></li><li class="lvl-2"><p>datefmt：指定日期时间格式。</p></li><li class="lvl-2"><p>level：设置rootlogger（后边会讲解具体概念）的日志级别</p></li><li class="lvl-2"><p>stream：用指定的stream创建StreamHandler。可以指定输出到sys.stderr,sys.stdout或者文件 (f=open- (‘test.log’,’w’))，默认为sys.stderr。若同时列出了filename和stream两个参数，则 stream参数会被忽略。</p></li><li class="lvl-2"><p>format参数中可能用到的格式化串</p><p>%(name)s Logger的名字</p><p>%(levelno)s 数字形式的日志级别</p><p>%(levelname)s 文本形式的日志级别</p><p>%(pathname)s 调用日志输出函数的模块的完整路径名，可能没有</p><p>%(filename)s 调用日志输出函数的模块的文件名</p><p>%(module)s 调用日志输出函数的模块名</p><p>%(funcName)s 调用日志输出函数的函数名</p><p>%(lineno)d 调用日志输出函数的语句所在的代码行</p><p>%(created)f 当前时间，用UNIX标准的表示时间的浮 点数表示</p><p>%(relativeCreated)d 输出日志信息时的，自Logger创建以 来的毫秒数</p><p>%(asctime)s 字符串形式的当前时间。默认格式是 “2003-07-08 16:49:45,896”。逗号后面的是毫秒</p><p>%(thread)d 线程ID。可能没有</p><p>%(threadName)s 线程名。可能没有</p><p>%(process)d 进程ID。可能没有</p><p>%(message)s用户输出的消息</p></li></ul><h1>logger对象配置（也与日志有关）</h1><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> logging<br><br>logger = logging.getLogger()<br><br><span class="hljs-comment"># 创建一个handler，用于写入日志文件</span><br>fh = logging.FileHandler(<span class="hljs-string">&#x27;test.log&#x27;</span>,encoding=<span class="hljs-string">&#x27;utf-8&#x27;</span>)<br><span class="hljs-comment"># 再创建一个handler，用于输出到控制台</span><br>ch = logging.StreamHandler()<br><br>formatter = logging.Formatter(<span class="hljs-string">&#x27;%(asctime)s - %(name)s - %(levelname)s - %(message)s&#x27;</span>)<br><br>fh.setFormatter(formatter)<br><br>ch.setFormatter(formatter)<br><br>logger.addHandler(fh) <span class="hljs-comment">#logger对象可以添加多个fh和ch对象</span><br>logger.addHandler(ch)<br>logger.debug(<span class="hljs-string">&#x27;logger debug message&#x27;</span>)<br>logger.info(<span class="hljs-string">&#x27;logger info message&#x27;</span>)<br>logger.warning(<span class="hljs-string">&#x27;logger warning message&#x27;</span>)<br>logger.error(<span class="hljs-string">&#x27;logger error message&#x27;</span>)<br>logger.critical(<span class="hljs-string">&#x27;logger critical message&#x27;</span>)<br></code></pre></td></tr></table></figure><p>logging库提供了多个组件：Logger、Handler、Filter、Formatter。Logger对象提供应用程序可直接使用的接口，Handler发送日志到适当的目的地，Filter提供了过滤日志信息的方法，Formatter指定日志显示格式。</p><h2 id="logger的配置文件">logger的配置文件</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-string">&quot;&quot;&quot;</span><br><span class="hljs-string">logging配置</span><br><span class="hljs-string">&quot;&quot;&quot;</span><br><br><span class="hljs-keyword">import</span> os<br><span class="hljs-keyword">import</span> logging.config<br><br><span class="hljs-comment"># 定义三种日志输出格式 开始</span><br><br>standard_format = <span class="hljs-string">&#x27;[%(asctime)s][%(threadName)s:%(thread)d][task_id:%(name)s][%(filename)s:%(lineno)d]&#x27;</span> \<br>                  <span class="hljs-string">&#x27;[%(levelname)s][%(message)s]&#x27;</span> <span class="hljs-comment">#其中name为getlogger指定的名字</span><br>                  <br>simple_format = <span class="hljs-string">&#x27;[%(levelname)s][%(asctime)s][%(filename)s:%(lineno)d]%(message)s&#x27;</span><br><br>id_simple_format = <span class="hljs-string">&#x27;[%(levelname)s][%(asctime)s] %(message)s&#x27;</span><br><br><span class="hljs-comment"># 定义日志输出格式 结束</span><br><br>logfile_dir = os.path.dirname(os.path.abspath(__file__)) <span class="hljs-comment"># log文件的目录</span><br><br>logfile_name = <span class="hljs-string">&#x27;all2.log&#x27;</span> <span class="hljs-comment"># log文件名</span><br><br><span class="hljs-comment"># 如果不存在定义的日志目录就创建一个</span><br><span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> os.path.isdir(logfile_dir):<br>	os.mkdir(logfile_dir)<br>	<br><span class="hljs-comment"># log文件的全路径</span><br>logfile_path = os.path.join(logfile_dir, logfile_name)<br><br><span class="hljs-comment"># log配置字典</span><br>LOGGING_DIC = &#123;<br>	<span class="hljs-string">&#x27;version&#x27;</span>: <span class="hljs-number">1</span>,<br>	<span class="hljs-string">&#x27;disable_existing_loggers&#x27;</span>: <span class="hljs-literal">False</span>,<br>	<span class="hljs-string">&#x27;formatters&#x27;</span>: &#123;<br>		<span class="hljs-string">&#x27;standard&#x27;</span>: &#123;<br>			<span class="hljs-string">&#x27;format&#x27;</span>: standard_format<br>		&#125;,<br>		<span class="hljs-string">&#x27;simple&#x27;</span>: &#123;<br>			<span class="hljs-string">&#x27;format&#x27;</span>: simple_format<br>		&#125;,<br>	&#125;,<br>	<span class="hljs-string">&#x27;filters&#x27;</span>: &#123;&#125;,<br>	<span class="hljs-string">&#x27;handlers&#x27;</span>: &#123;<br>		<span class="hljs-comment">#打印到终端的日志</span><br>		<span class="hljs-string">&#x27;console&#x27;</span>: &#123;<br>			<span class="hljs-string">&#x27;level&#x27;</span>: <span class="hljs-string">&#x27;DEBUG&#x27;</span>,<br>			<span class="hljs-string">&#x27;class&#x27;</span>: <span class="hljs-string">&#x27;logging.StreamHandler&#x27;</span>, <span class="hljs-comment"># 打印到屏幕</span><br>			<span class="hljs-string">&#x27;formatter&#x27;</span>: <span class="hljs-string">&#x27;simple&#x27;</span><br>		&#125;,<br>		<span class="hljs-comment">#打印到文件的日志,收集info及以上的日志</span><br>		<span class="hljs-string">&#x27;default&#x27;</span>: &#123;<br>			<span class="hljs-string">&#x27;level&#x27;</span>: <span class="hljs-string">&#x27;DEBUG&#x27;</span>,<br>			<span class="hljs-string">&#x27;class&#x27;</span>: <span class="hljs-string">&#x27;logging.handlers.RotatingFileHandler&#x27;</span>, <span class="hljs-comment"># 保存到文件</span><br>			<span class="hljs-string">&#x27;formatter&#x27;</span>: <span class="hljs-string">&#x27;standard&#x27;</span>,<br>			<span class="hljs-string">&#x27;filename&#x27;</span>: logfile_path, <span class="hljs-comment"># 日志文件</span><br>			<span class="hljs-string">&#x27;maxBytes&#x27;</span>: <span class="hljs-number">1024</span>*<span class="hljs-number">1024</span>*<span class="hljs-number">5</span>, <span class="hljs-comment"># 日志大小 5M</span><br>			<span class="hljs-string">&#x27;backupCount&#x27;</span>: <span class="hljs-number">5</span>,<br>			<span class="hljs-string">&#x27;encoding&#x27;</span>: <span class="hljs-string">&#x27;utf-8&#x27;</span>, <span class="hljs-comment"># 日志文件的编码，再也不用担心中文log乱码了</span><br>		&#125;,<br>	&#125;,<br>	<span class="hljs-string">&#x27;loggers&#x27;</span>: &#123;<br>		<span class="hljs-comment">#logging.getLogger(__name__)拿到的logger配置</span><br>		<span class="hljs-string">&#x27;&#x27;</span>: &#123;<br>			<span class="hljs-string">&#x27;handlers&#x27;</span>: [<span class="hljs-string">&#x27;default&#x27;</span>, <span class="hljs-string">&#x27;console&#x27;</span>], <span class="hljs-comment"># 这里把上面定义的两个handler都加上，即log数据既写入文件又打印到屏幕</span><br>			<span class="hljs-string">&#x27;level&#x27;</span>: <span class="hljs-string">&#x27;DEBUG&#x27;</span>,<br>			<span class="hljs-string">&#x27;propagate&#x27;</span>: <span class="hljs-literal">True</span>, <span class="hljs-comment"># 向上（更高level的logger）传递</span><br>		&#125;,<br>	&#125;,<br>&#125;<br><span class="hljs-keyword">def</span> <span class="hljs-title function_">load_my_logging_cfg</span>():<br>    logging.config.dictConfig(LOGGING_DIC) <span class="hljs-comment"># 导入上面定义的logging配置</span><br>	logger = logging.getLogger(__name__) <span class="hljs-comment"># 生成一个log实例</span><br>	logger.info(<span class="hljs-string">&#x27;It works!&#x27;</span>) <span class="hljs-comment"># 记录该文件的运行状态</span><br>    <br><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&#x27;__main__&#x27;</span>:<br>	load_my_logging_cfg()<br></code></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><code class="hljs python">注意：<br><br><br><span class="hljs-comment">#1、有了上述方式我们的好处是：所有与logging模块有关的配置都写到字典中就可以了，更加清晰，方便管理</span><br><br><br><span class="hljs-comment">#2、我们需要解决的问题是：</span><br>	<span class="hljs-number">1</span>、从字典加载配置：logging.config.dictConfig(settings.LOGGING_DIC)<br>	<br>	<span class="hljs-number">2</span>、拿到logger对象来产生日志<br>	logger对象都是配置到字典的loggers 键对应的子字典中的<br>	按照我们对logging模块的理解，要想获取某个东西都是通过名字，也就是key来获取的<br>	于是我们要获取不同的logger对象就是<br>	logger=logging.getLogger(<span class="hljs-string">&#x27;loggers子字典的key名&#x27;</span>)<br>	<br>	<br>但问题是：如果我们想要不同logger名的logger对象都共用一段配置，那么肯定不能在loggers子字典中定义n个key<br><span class="hljs-string">&#x27;loggers&#x27;</span>: &#123;<br>		<span class="hljs-string">&#x27;l1&#x27;</span>: &#123;<br>			<span class="hljs-string">&#x27;handlers&#x27;</span>: [<span class="hljs-string">&#x27;default&#x27;</span>, <span class="hljs-string">&#x27;console&#x27;</span>], <span class="hljs-comment">#</span><br>			<span class="hljs-string">&#x27;level&#x27;</span>: <span class="hljs-string">&#x27;DEBUG&#x27;</span>,<br>			<span class="hljs-string">&#x27;propagate&#x27;</span>: <span class="hljs-literal">True</span>, <span class="hljs-comment"># 向上（更高level的logger）传递</span><br>		&#125;,<br>		<span class="hljs-string">&#x27;l2: &#123;</span><br><span class="hljs-string">			&#x27;</span>handlers<span class="hljs-string">&#x27;: [&#x27;</span>default<span class="hljs-string">&#x27;, &#x27;</span>console<span class="hljs-string">&#x27; ],</span><br><span class="hljs-string">			&#x27;</span>level<span class="hljs-string">&#x27;: &#x27;</span>DEBUG<span class="hljs-string">&#x27;,</span><br><span class="hljs-string">			&#x27;</span>propagate<span class="hljs-string">&#x27;: False, # 向上（更高level的logger）传递</span><br><span class="hljs-string">		&#125;,</span><br><span class="hljs-string">		&#x27;</span>l3<span class="hljs-string">&#x27;: &#123;</span><br><span class="hljs-string">			&#x27;</span>handlers<span class="hljs-string">&#x27;: [&#x27;</span>default<span class="hljs-string">&#x27;, &#x27;</span>console<span class="hljs-string">&#x27;], #</span><br><span class="hljs-string">			&#x27;</span>level<span class="hljs-string">&#x27;: &#x27;</span>DEBUG<span class="hljs-string">&#x27;,</span><br><span class="hljs-string">			&#x27;</span>propagate<span class="hljs-string">&#x27;: True, # 向上（更高level的logger）传递</span><br><span class="hljs-string">		&#125;,</span><br><span class="hljs-string">&#125;</span><br><span class="hljs-string"></span><br><span class="hljs-string"></span><br><span class="hljs-string">#我们的解决方式是，定义一个空的key</span><br><span class="hljs-string">	&#x27;</span>loggers<span class="hljs-string">&#x27;: &#123;</span><br><span class="hljs-string">		&#x27;</span><span class="hljs-string">&#x27;: &#123;</span><br><span class="hljs-string">			&#x27;</span>handlers<span class="hljs-string">&#x27;: [&#x27;</span>default<span class="hljs-string">&#x27;, &#x27;</span>console<span class="hljs-string">&#x27;],</span><br><span class="hljs-string">			&#x27;</span>level<span class="hljs-string">&#x27;: &#x27;</span>DEBUG<span class="hljs-string">&#x27;,</span><br><span class="hljs-string">			&#x27;</span>propagate<span class="hljs-string">&#x27;: True,</span><br><span class="hljs-string">		&#125;,</span><br><span class="hljs-string">&#125;</span><br><span class="hljs-string"></span><br><span class="hljs-string">这样我们再取logger对象时</span><br><span class="hljs-string">logging.getLogger(__name__)，不同的文件__name__不同，这保证了打印日志时标识信息不同，但是拿着该名字去loggers里找key名时却发现找不到，于是默认使用key=&#x27;</span><span class="hljs-string">&#x27;的配置</span><br></code></pre></td></tr></table></figure><h1>collections模块(用来提供额外的数据结构)</h1><p>在内置数据类型（dict、list、set、tuple）的基础上，collections模块还提供了几个额外的数据类型： Counter、deque、defaultdict、namedtuple和OrderedDict等。</p><ol><li class="lvl-3"><p>namedtuple: 生成可以使用名字来访问元素内容的tuple</p></li><li class="lvl-3"><p>deque: 双端队列，可以快速的从另外一侧追加和推出对象</p></li><li class="lvl-3"><p>Counter: 计数器，主要用来计数</p></li><li class="lvl-3"><p>defaultdict: 带有默认值的字典</p></li></ol><h2 id="namedtuple（用于表示二位坐标）">namedtuple（用于表示二位坐标）</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">from</span> collections <span class="hljs-keyword">import</span> namedtuple<br>point = namedtuple(<span class="hljs-string">&#x27;point&#x27;</span>,[<span class="hljs-string">&#x27;x&#x27;</span>,<span class="hljs-string">&#x27;y&#x27;</span>])<br>p = point(<span class="hljs-number">1</span>,<span class="hljs-number">2</span>)<br><span class="hljs-built_in">print</span>(p.x)<br></code></pre></td></tr></table></figure><p>一个点的二维坐标就可以表示成,但是，看到(1, 2)，很难看出这个tuple是用来表示一个坐标的。 这时，namedtuple就派上了用场</p><h2 id="deque（双向链表，可高效插入删除操作，适合队列和栈）">deque（双向链表，可高效插入删除操作，适合队列和栈）</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">from</span> collections <span class="hljs-keyword">import</span> deque<br><br>q = deque([<span class="hljs-string">&#x27;a&#x27;</span>,<span class="hljs-string">&#x27;b&#x27;</span>,<span class="hljs-string">&#x27;c&#x27;</span>])<br>q.append(<span class="hljs-string">&#x27;x&#x27;</span>)<br>q.appendleft(<span class="hljs-string">&#x27;y&#x27;</span>)<br><br><span class="hljs-built_in">print</span>(q)<br></code></pre></td></tr></table></figure><p>deque除了实现list的append()和pop()外，还支持appendleft()和popleft()，这样就可以非常高效地往头 部添加或删除元素。</p><h2 id="defaultdict">defaultdict</h2><p>有如下值列表 [11,22,33,44,55,66,77,88,99,90…]，将所有大于 66 的值保存至字典的第一个key中，将小 于 66 的值保存至第二个key的值中。</p><p>即： {‘k1’: 大于66 , ‘k2’: 小于66}</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># 不用defaultdict的方式</span><br>li = [<span class="hljs-number">11</span>,<span class="hljs-number">22</span>,<span class="hljs-number">33</span>,<span class="hljs-number">44</span>,<span class="hljs-number">55</span>,<span class="hljs-number">77</span>,<span class="hljs-number">88</span>,<span class="hljs-number">99</span>,<span class="hljs-number">90</span>]<br><br>result = &#123;&#125;<br><span class="hljs-keyword">for</span> row <span class="hljs-keyword">in</span> li:<br>	<span class="hljs-keyword">if</span> row &lt; <span class="hljs-number">66</span>:<br>		<span class="hljs-keyword">if</span> <span class="hljs-string">&#x27;key1&#x27;</span> <span class="hljs-keyword">not</span> <span class="hljs-keyword">in</span> result:<br>			result[<span class="hljs-string">&#x27;key1&#x27;</span>]=[]<br>		result[<span class="hljs-string">&#x27;key1&#x27;</span>].append(row)<br>	<span class="hljs-keyword">else</span>:<br>		<span class="hljs-keyword">if</span> <span class="hljs-string">&#x27;key2&#x27;</span> <span class="hljs-keyword">not</span> <span class="hljs-keyword">in</span> result:<br>			result[<span class="hljs-string">&#x27;key2&#x27;</span>]=[]<br>		result[<span class="hljs-string">&#x27;key2&#x27;</span>].append(row)<br><span class="hljs-built_in">print</span>(result)<br><br><br><span class="hljs-comment"># 用defaultdict的方式</span><br><span class="hljs-keyword">from</span> collections <span class="hljs-keyword">import</span> defaultdict<br><br>li = [<span class="hljs-number">11</span>,<span class="hljs-number">22</span>,<span class="hljs-number">33</span>,<span class="hljs-number">44</span>,<span class="hljs-number">55</span>,<span class="hljs-number">77</span>,<span class="hljs-number">88</span>,<span class="hljs-number">99</span>,<span class="hljs-number">90</span>]<br>result=defaultdict(<span class="hljs-built_in">list</span>)<br><span class="hljs-built_in">print</span>(result)<br><span class="hljs-keyword">for</span> row <span class="hljs-keyword">in</span> li:<br>	<span class="hljs-keyword">if</span> row &gt; <span class="hljs-number">66</span>:<br>		result[<span class="hljs-string">&#x27;key1&#x27;</span>].append(row)<br>	<span class="hljs-keyword">else</span>:<br>		result[<span class="hljs-string">&#x27;key2&#x27;</span>].append(row)<br>		<br><span class="hljs-built_in">print</span>(result)<br></code></pre></td></tr></table></figure><h2 id="counter">counter</h2><p>Counter类的目的是用来跟踪值出现的次数。它是一个无序的容器类型，以字典的键值对形式存储，其中元素作为key，其计数作为value。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">from</span> collections <span class="hljs-keyword">import</span> Counter<br><br>c = Counter(<span class="hljs-string">&#x27;qazxswqazxswqazxswsxaqwsxaqws&#x27;</span>)<br><span class="hljs-built_in">print</span>(c)<br></code></pre></td></tr></table></figure><h1>时间有关的模块</h1><h2 id="time模块">time模块</h2><p>常用方法</p><ul class="lvl-0"><li class="lvl-2"><p>time.sleep(secs)</p><p>(线程)推迟指定的时间运行。单位为秒。</p></li><li class="lvl-2"><p>time.time()</p><p>获取当前时间戳</p></li></ul><p>表示时间的三种方式</p><p>在Python中，通常有这三种方式来表示时间：时间戳、元组(struct_time)、格式化的时间字符串：</p><ol><li class="lvl-3"><p>时间戳(timestamp) ：通常来说，时间戳表示的是从1970年1月1日00:00:00开始按秒计算的偏移 量。我们运行“type(time.time())”，返回的是float类型。</p></li><li class="lvl-3"><p>格式化的时间字符串(Format String)： ‘1999-12-06’</p></li></ol><table><thead><tr><th>%y</th><th>两位数的年份表示（00-99）</th></tr></thead><tbody><tr><td>%Y</td><td>四位数的年份表示（000-9999）</td></tr><tr><td>%m</td><td>月份（01-12）</td></tr><tr><td>%d</td><td>月内中的一天（0-31）</td></tr><tr><td>%H</td><td>24小时制小时数（0-23）</td></tr><tr><td>%I</td><td>12小时制小时数（01-12）</td></tr><tr><td>%M</td><td>分钟数（00=59）</td></tr><tr><td>%S</td><td>秒（00-59）</td></tr><tr><td>%a</td><td>本地简化星期名称</td></tr><tr><td>%A</td><td>本地完整星期名称</td></tr><tr><td>%b</td><td>本地简化的月份名称</td></tr><tr><td>%B</td><td>本地完整的月份名称</td></tr><tr><td>%c</td><td>本地相应的日期表示和时间表示</td></tr><tr><td>%j</td><td>年内的一天（001-366）</td></tr><tr><td>%p</td><td>本地A.M.或P.M.的等价符</td></tr><tr><td>%U</td><td>一年中的星期数（00-53）星期天为星期的开始</td></tr><tr><td>%w</td><td>星期（0-6），星期天为星期的开始</td></tr><tr><td>%W</td><td>一年中的星期数（00-53）星期一为星期的开始</td></tr><tr><td>%x</td><td>本地相应的日期表示</td></tr><tr><td>%X</td><td>本地相应的时间表示</td></tr><tr><td>%Z</td><td>当前时区的名称</td></tr><tr><td>%%</td><td>%号本身</td></tr></tbody></table><p>元组(struct_time) ：struct_time元组共有9个元素共九个元素:(年，月，日，时，分，秒，一年中 第几周，一年中第几天等）</p><table><thead><tr><th>索引（Index）</th><th>属性（Attribute）</th><th>值（Values）</th></tr></thead><tbody><tr><td>0</td><td>tm_year（年）</td><td>比如2011</td></tr><tr><td>1</td><td>tm_mon（月）</td><td>1月12日</td></tr><tr><td>2</td><td>tm_mday（日）</td><td>1月31日</td></tr><tr><td>3</td><td>tm_hour（时）</td><td>0 - 23</td></tr><tr><td>4</td><td>tm_min（分）</td><td>0 - 59</td></tr><tr><td>5</td><td>tm_sec（秒）</td><td>0 - 60</td></tr><tr><td>6</td><td>tm_wday（weekday）</td><td>0 - 6（0表示周一）</td></tr><tr><td>7</td><td>tm_yday（一年中的第几天）</td><td>1 - 366</td></tr><tr><td>8</td><td>tm_isdst（是否是夏令时）</td><td>默认为0</td></tr></tbody></table><figure class="highlight cos"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs cos">import time<br><br># 第一种时间格式，时间戳的形式<br><span class="hljs-keyword">print</span>(time.time())<br><br># 第二种时间格式，格式化的时间<br><span class="hljs-keyword">print</span>(time.strftime(&#x27;<span class="hljs-built_in">%Y</span>-<span class="hljs-built_in">%m</span>-<span class="hljs-built_in">%d</span> <span class="hljs-built_in">%X</span>&#x27;))<br><span class="hljs-keyword">print</span>(time.strftime(&#x27;<span class="hljs-built_in">%Y</span>-<span class="hljs-built_in">%m</span>-<span class="hljs-built_in">%d</span> <span class="hljs-built_in">%H</span>-<span class="hljs-built_in">%M</span>-<span class="hljs-built_in">%S</span>&#x27;))<br><br># 第三种时间格式，结构化的时间，是一个元组<br><span class="hljs-keyword">print</span>(time.localtime())<br></code></pre></td></tr></table></figure><p>小结：时间戳是计算机能够识别的时间；时间字符串是人能够看懂的时间；元组则是用来操作时间的</p><p><strong>几种格式之间的转换</strong></p><p><img src="image-20220708192657540.png" srcset="/img/loading.gif" lazyload alt="转换示意图"></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> time<br><span class="hljs-comment"># 格式化时间 ----&gt; 结构化时间</span><br>ft = time.strftime(<span class="hljs-string">&#x27;%Y/%m/%d %H:%M:%S&#x27;</span>)<br><span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;ft&#x27;</span>,ft)<br>st = time.strptime(ft,<span class="hljs-string">&#x27;%Y/%m/%d %H:%M:%S&#x27;</span>)<br><span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;st&#x27;</span>,st)<br><span class="hljs-comment"># 结构化时间 ---&gt; 时间戳</span><br>t = time.mktime(st)<br><span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;t&#x27;</span>,t)<br><br><span class="hljs-comment"># 时间戳 ----&gt; 结构化时间</span><br>t = time.time()<br>st = time.localtime(t)<br><span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;st&#x27;</span>,st)<br><span class="hljs-comment"># 结构化时间 ---&gt; 格式化时间</span><br>ft = time.strftime(<span class="hljs-string">&#x27;%Y/%m/%d %H:%M:%S&#x27;</span>,st)<br><span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;ft&#x27;</span>,ft)<br></code></pre></td></tr></table></figure><p><img src="image-20220708192814418.png" srcset="/img/loading.gif" lazyload alt="转换示意图"></p><figure class="highlight sas"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs sas">import time<br><br>#结构化时间 --&gt; <span class="hljs-title function_">%a</span> <span class="hljs-title function_">%b</span> <span class="hljs-title function_">%d</span> <span class="hljs-title function_">%H</span>:<span class="hljs-title function_">%M</span>:<span class="hljs-title function_">%S</span> <span class="hljs-title function_">%Y</span>串<br>#time.asc<span class="hljs-meta">time</span>(结构化时间) 如果不传参数，直接返回当前时间的格式化串<br>pr<span class="hljs-meta">int</span>(time.asc<span class="hljs-meta">time</span>(time.local<span class="hljs-meta">time</span>(1550312090.4021888)))<br><br>#时间戳 --&gt; <span class="hljs-title function_">%a</span> <span class="hljs-title function_">%d</span> <span class="hljs-title function_">%d</span> <span class="hljs-title function_">%H</span>:<span class="hljs-title function_">%M</span>:<span class="hljs-title function_">%S</span> <span class="hljs-title function_">%Y</span>串<br>#time.c<span class="hljs-meta">time</span>(时间戳) 如果不传参数，直接返回当前时间的格式化串<br>pr<span class="hljs-meta">int</span>(time.c<span class="hljs-meta">time</span>(1550312090.4021888))<br></code></pre></td></tr></table></figure><p>计算时间差</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> time<br><br>start_time=time.mktime(time.strptime(<span class="hljs-string">&#x27;2017-09-11 08:30:00&#x27;</span>,<span class="hljs-string">&#x27;%Y-%m-%d</span><br><span class="hljs-string">%H:%M:%S&#x27;</span>))<br>end_time=time.mktime(time.strptime(<span class="hljs-string">&#x27;2019-09-12 11:00:50&#x27;</span>,<span class="hljs-string">&#x27;%Y-%m-%d</span><br><span class="hljs-string">%H:%M:%S&#x27;</span>))<br>dif_time=end_time-start_time<br>struct_time=time.gmtime(dif_time)<br><span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;过去了%d年%d月%d天%d小时%d分钟%d秒&#x27;</span>%(struct_time.tm_year-<span class="hljs-number">1970</span>,struct_time.tm_mon-<span class="hljs-number">1</span>,<br>struct_time.tm_mday-<span class="hljs-number">1</span>,struct_time.tm_hour,<br><br>struct_time.tm_min,struct_time.tm_sec))<br></code></pre></td></tr></table></figure><p>显示进度条</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> time<br><br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">0</span>,<span class="hljs-number">101</span>,<span class="hljs-number">2</span>):<br>	time.sleep(<span class="hljs-number">0.1</span>)<br>	char_num = i//<span class="hljs-number">2</span><br>	per_str = <span class="hljs-string">&#x27;\r%s%% : %s\n&#x27;</span> % (i, <span class="hljs-string">&#x27;*&#x27;</span> * char_num) \<br>		<span class="hljs-keyword">if</span> i == <span class="hljs-number">100</span> <span class="hljs-keyword">else</span> <span class="hljs-string">&#x27;\r%s%% : %s&#x27;</span> % (i,<span class="hljs-string">&#x27;*&#x27;</span>*char_num)<br>	<span class="hljs-built_in">print</span>(per_str,end=<span class="hljs-string">&#x27;&#x27;</span>, flush=<span class="hljs-literal">True</span>)<br></code></pre></td></tr></table></figure><p>这是换一种方式显示</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-keyword">import</span> time<br><span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;游戏开始加载&quot;</span>)<br><span class="hljs-keyword">for</span> i in <span class="hljs-keyword">range</span>(<span class="hljs-number">0</span>, <span class="hljs-number">101</span>, <span class="hljs-number">2</span>):<br>	time.sleep(<span class="hljs-number">0.1</span>)<br>	char_num = i <span class="hljs-comment">// 2</span><br>	per_str = <span class="hljs-string">&#x27;\r[%s&#x27;</span> % (<span class="hljs-string">&#x27;#&#x27;</span> * char_num)<br>	<br>	<span class="hljs-built_in">print</span>(per_str+<span class="hljs-string">&quot;%s&quot;</span> % <span class="hljs-string">&quot;_&quot;</span> *(<span class="hljs-number">50</span> - char_num), <span class="hljs-string">&quot;%s%%]&quot;</span> % i, end=<span class="hljs-string">&#x27;&#x27;</span>)<br><span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;&quot;</span>)<br></code></pre></td></tr></table></figure><h2 id="datatime模块">datatime模块</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># datatime模块</span><br><span class="hljs-keyword">import</span> datetime<br>now_time = datetime.datetime.now() <span class="hljs-comment"># 现在的时间</span><br><span class="hljs-comment"># 只能调整的字段：weeks days hours minutes seconds</span><br><span class="hljs-built_in">print</span>(datetime.datetime.now() + datetime.timedelta(weeks=<span class="hljs-number">3</span>)) <span class="hljs-comment"># 三周后</span><br><span class="hljs-built_in">print</span>(datetime.datetime.now() + datetime.timedelta(weeks=-<span class="hljs-number">3</span>)) <span class="hljs-comment"># 三周前</span><br><span class="hljs-built_in">print</span>(datetime.datetime.now() + datetime.timedelta(days=-<span class="hljs-number">3</span>)) <span class="hljs-comment"># 三天前</span><br><span class="hljs-built_in">print</span>(datetime.datetime.now() + datetime.timedelta(days=<span class="hljs-number">3</span>)) <span class="hljs-comment"># 三天后</span><br><span class="hljs-built_in">print</span>(datetime.datetime.now() + datetime.timedelta(hours=<span class="hljs-number">5</span>)) <span class="hljs-comment"># 5小时后</span><br><span class="hljs-built_in">print</span>(datetime.datetime.now() + datetime.timedelta(hours=-<span class="hljs-number">5</span>)) <span class="hljs-comment"># 5小时前</span><br><span class="hljs-built_in">print</span>(datetime.datetime.now() + datetime.timedelta(minutes=-<span class="hljs-number">15</span>)) <span class="hljs-comment"># 15分钟前</span><br><span class="hljs-built_in">print</span>(datetime.datetime.now() + datetime.timedelta(minutes=<span class="hljs-number">15</span>)) <span class="hljs-comment"># 15分钟后</span><br><span class="hljs-built_in">print</span>(datetime.datetime.now() + datetime.timedelta(seconds=-<span class="hljs-number">70</span>)) <span class="hljs-comment"># 70秒前</span><br><span class="hljs-built_in">print</span>(datetime.datetime.now() + datetime.timedelta(seconds=<span class="hljs-number">70</span>)) <span class="hljs-comment"># 70秒后</span><br>current_time = datetime.datetime.now()<br><span class="hljs-comment"># 可直接调整到指定的 年 月 日 时 分 秒 等</span><br><br><span class="hljs-built_in">print</span>(current_time.replace(year=<span class="hljs-number">1977</span>)) <span class="hljs-comment"># 直接调整到1977年</span><br><span class="hljs-built_in">print</span>(current_time.replace(month=<span class="hljs-number">1</span>)) <span class="hljs-comment"># 直接调整到1月份</span><br><span class="hljs-built_in">print</span>(current_time.replace(year=<span class="hljs-number">1989</span>,month=<span class="hljs-number">4</span>,day=<span class="hljs-number">25</span>)) <span class="hljs-comment"># 1989-04-25</span><br><span class="hljs-number">18</span>:<span class="hljs-number">49</span>:<span class="hljs-number">05.898601</span><br><br><span class="hljs-comment"># 将时间戳转化成时间</span><br><span class="hljs-built_in">print</span>(datetime.date.fromtimestamp(<span class="hljs-number">1232132131</span>)) <span class="hljs-comment"># 2009-01-17</span><br></code></pre></td></tr></table></figure><h2 id="random模块">random模块</h2><p>用来生成随机数模块</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> random<br><br><span class="hljs-built_in">print</span>(random.random()) <span class="hljs-comment"># 大于0且小于1之间的小数</span><br><span class="hljs-built_in">print</span>(random.uniform(<span class="hljs-number">1</span>,<span class="hljs-number">3</span>)) <span class="hljs-comment"># 大于1小于3的小数</span><br><br><span class="hljs-built_in">print</span>(random.randint(<span class="hljs-number">1</span>,<span class="hljs-number">5</span>)) <span class="hljs-comment"># 大于等于1且小于等于5之间的整数</span><br><span class="hljs-built_in">print</span>(random.randrange(<span class="hljs-number">1</span>,<span class="hljs-number">10</span>,<span class="hljs-number">2</span>)) <span class="hljs-comment"># 大于等于1且小于10之间的奇数</span><br><br>ret = random.choice([<span class="hljs-number">1</span>,<span class="hljs-string">&#x27;23&#x27;</span>,[<span class="hljs-number">4</span>,<span class="hljs-number">5</span>]]) <span class="hljs-comment"># 1或者23或者[4,5]</span><br><span class="hljs-built_in">print</span>(ret)<br><br>a,b = random.sample([<span class="hljs-number">1</span>,<span class="hljs-string">&#x27;23&#x27;</span>,[<span class="hljs-number">4</span>,<span class="hljs-number">5</span>]],<span class="hljs-number">2</span>) <span class="hljs-comment"># 列表元素任意2个组合 sample(seq, n) 从</span><br>序列seq中选择n个随机且独立的元素<br><span class="hljs-built_in">print</span>(a,b)<br><span class="hljs-comment"># 发牌</span><br><br>item = [<span class="hljs-number">1</span>,<span class="hljs-number">3</span>,<span class="hljs-number">5</span>,<span class="hljs-number">7</span>,<span class="hljs-number">9</span>]<br>random.shuffle(item) <span class="hljs-comment"># 打乱次序</span><br><span class="hljs-built_in">print</span>(item)<br></code></pre></td></tr></table></figure><p>生成随机验证码</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> random<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">v_code</span>():<br><br>	code = <span class="hljs-string">&#x27;&#x27;</span><br>	<span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">5</span>):<br>	<br>		num=random.randint(<span class="hljs-number">0</span>,<span class="hljs-number">9</span>)<br>		alf=<span class="hljs-built_in">chr</span>(random.randint(<span class="hljs-number">65</span>,<span class="hljs-number">90</span>)) <span class="hljs-comment">#chr() 用一个范围在 range（256）内的（就是0～255）整数作参数，返回一个对应的字符。返回值是当前整数对应的 ASCII 字符。</span><br>		add=random.choice([num,alf])<br>		code=<span class="hljs-string">&quot;&quot;</span>.join([code,<span class="hljs-built_in">str</span>(add)])<br>		<br>	<span class="hljs-keyword">return</span> code<br>	<br><span class="hljs-built_in">print</span>(v_code())<br></code></pre></td></tr></table></figure><p>注册登录案例添加验证码</p><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs py"><span class="hljs-keyword">def</span> <span class="hljs-title function_">get_code</span>():<br>    code = <span class="hljs-string">&#x27;&#x27;</span><br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">5</span>):<br>        num = random.randint(<span class="hljs-number">0</span>, <span class="hljs-number">9</span>)<br>        alf = <span class="hljs-built_in">chr</span>(random.randint(<span class="hljs-number">65</span>, <span class="hljs-number">90</span>))  <span class="hljs-comment"># 用ASCII码来返回大小写的字母</span><br>        add = random.choice([num, alf])<br>        code = <span class="hljs-string">&#x27;&#x27;</span>.join([code, <span class="hljs-built_in">str</span>(add)])<br>    <span class="hljs-comment"># print(code)</span><br>    <span class="hljs-keyword">return</span> code<br></code></pre></td></tr></table></figure><p>斗地主发牌</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">fight_whit_the_landowner</span>():  <span class="hljs-comment"># 斗地主游戏代码</span><br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;斗地主游戏即将开始&quot;</span>)<br>    time_line()<br>    ci_shu = <span class="hljs-number">0</span><br>    farmer1 = []<br>    farmer2 = []<br>    landowner = []<br>    card = []<br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, <span class="hljs-number">14</span>):<br>        <span class="hljs-keyword">if</span> i == <span class="hljs-number">11</span>:<br>            i = <span class="hljs-string">&#x27;J&#x27;</span><br>        <span class="hljs-keyword">elif</span> i == <span class="hljs-number">12</span>:<br>            i = <span class="hljs-string">&#x27;Q&#x27;</span><br>        <span class="hljs-keyword">elif</span> i == <span class="hljs-number">13</span>:<br>            i = <span class="hljs-string">&#x27;K&#x27;</span><br>        <span class="hljs-keyword">elif</span> i == <span class="hljs-number">1</span>:<br>            i = <span class="hljs-string">&#x27;A&#x27;</span><br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, <span class="hljs-number">14</span>):<br>        card.append(<span class="hljs-string">&quot;♠&quot;</span> + <span class="hljs-built_in">str</span>(i))<br>        card.append(<span class="hljs-string">&quot;♣&quot;</span> + <span class="hljs-built_in">str</span>(i))<br>        card.append(<span class="hljs-string">&quot;♦&quot;</span> + <span class="hljs-built_in">str</span>(i))<br>        card.append(<span class="hljs-string">&quot;♥&quot;</span> + <span class="hljs-built_in">str</span>(i))<br>    card.append(<span class="hljs-string">&#x27;大王&#x27;</span>)<br>    card.append(<span class="hljs-string">&#x27;小王&#x27;</span>)<br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, <span class="hljs-number">10</span>):<br>        random.shuffle(card)<br><br>    <span class="hljs-keyword">while</span> ci_shu &lt; <span class="hljs-number">51</span>:<br>        farmer1.append(card[<span class="hljs-number">1</span>])<br>        farmer2.append(card[ci_shu + <span class="hljs-number">2</span>])<br>        landowner.append(card[ci_shu + <span class="hljs-number">3</span>])<br>        ci_shu += <span class="hljs-number">3</span><br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;&#x27;&#x27;底牌：%s&#x27;&#x27;&#x27;</span> % card[<span class="hljs-number">52</span>:<span class="hljs-number">55</span>])<br>    landowner.append(card[<span class="hljs-number">52</span>:<span class="hljs-number">55</span>])<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;&#x27;&#x27;一号农民的牌：%s&#x27;&#x27;&#x27;</span> % farmer1)<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;&#x27;&#x27;二号农民的牌：%s&#x27;&#x27;&#x27;</span> % farmer2)<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;&#x27;&#x27;地主的牌：%s&#x27;&#x27;&#x27;</span> % landowner)<br>    choice = <span class="hljs-built_in">input</span>(<span class="hljs-string">&quot;输入again重新来一局，输入quit退出&quot;</span>)<br>    <span class="hljs-keyword">if</span> choice == <span class="hljs-string">&#x27;again&#x27;</span>:<br>        fight_whit_the_landowner()<br>    <span class="hljs-keyword">elif</span> choice == <span class="hljs-string">&#x27;quit&#x27;</span>:<br>        <span class="hljs-keyword">return</span><br>    <span class="hljs-keyword">else</span>:<br>        <span class="hljs-keyword">return</span><br>        <br>fight_with_landowner()<br></code></pre></td></tr></table></figure><h1>OS模块</h1><p>os模块是与操作系统交互的一个接口</p><p>当前执行这个python文件的工作目录相关的工作路径</p><table><thead><tr><th>os.getcwd()</th><th>获取当前工作目录，即当前python脚本工作的目录路径</th></tr></thead><tbody><tr><td>os.chdir(“dirname”)</td><td>改变当前脚本工作目录；相当于shell下cd</td></tr><tr><td>os.curdir</td><td>返回当前目录: (‘.’)</td></tr><tr><td>os.pardir</td><td>获取当前目录的父目录字符串名：(‘…’)</td></tr></tbody></table><p>文件夹相关</p><table><thead><tr><th>os.makedirs(‘dirname1/dirname2’)</th><th>可生成多层递归目录</th></tr></thead><tbody><tr><td>os.removedirs(‘dirname1’)</td><td>若目录为空，则删除，并递归到上一级目录，如若也为 空，则删除，依此类推</td></tr><tr><td>os.mkdir(‘dirname’)</td><td>生成单级目录；相当于shell中mkdir dirname</td></tr><tr><td>os.rmdir(‘dirname’)</td><td>删除单级空目录，若目录不为空则无法删除，报错；相 当于shell中rmdir dirname</td></tr><tr><td>os.listdir(‘dirname’)</td><td>列出指定目录下的所有文件和子目录，包括隐藏文件， 并以列表方式打印</td></tr></tbody></table><p>文件相关</p><table><thead><tr><th>os.remove()</th><th>删除一个文件</th></tr></thead><tbody><tr><td>os.rename(“oldname”,“newname”)</td><td>重命名文件/目录</td></tr><tr><td>os.stat(‘path/filename’)</td><td>获取文件/目录信息</td></tr></tbody></table><p>操作系统差异相关</p><table><thead><tr><th>os.sep</th><th>输出操作系统特定的路径分隔符，win下为&quot;&quot;,Linux下为&quot;/&quot;</th></tr></thead><tbody><tr><td>os.sep</td><td>输出当前平台使用的行终止符，win下为&quot;\t\n&quot;,Linux下为&quot;\n&quot;</td></tr><tr><td>os.pathsep</td><td>输出当前平台使用的行终止符，win下为&quot;\t\n&quot;,Linux下为&quot;\n&quot;</td></tr><tr><td><a target="_blank" rel="noopener" href="http://os.name">os.name</a></td><td>输出当前平台使用的行终止符，win下为&quot;\t\n&quot;,Linux下为&quot;\n&quot;</td></tr></tbody></table><p>执行系统命令相关</p><table><thead><tr><th>执行系统命令相关</th><th>os.environ</th></tr></thead><tbody><tr><td>执行系统命令相关</td><td>运行shell命令，获取执行结果</td></tr><tr><td>os.environ</td><td>获取系统环境变量</td></tr></tbody></table><p>path系列，和路径相关</p><table><thead><tr><th>os.path.abspath(path)</th><th>返回path规范化的绝对路径</th></tr></thead><tbody><tr><td>os.path.split(path)</td><td>将path分割成目录和文件名二元组返回</td></tr><tr><td>os.path.dirname(path)</td><td>返回path的目录。其实就是os.path.split(path)的第一个元素</td></tr><tr><td>os.path.basename(path)</td><td>返回path最后的文件名。如何path以／或\结尾，那么就会返回空 值，即os.path.split(path)的第二个元素。</td></tr><tr><td>os.path.exists(path)</td><td>如果path存在，返回True；如果path不存在，返回False</td></tr><tr><td>os.path.isabs(path)</td><td>如果path是绝对路径，返回True</td></tr><tr><td>os.path.isfile(path)</td><td>如果path是一个存在的文件，返回True。否则返回False</td></tr><tr><td>os.path.isdir(path)</td><td>如果path是一个存在的目录，则返回True。否则返回False</td></tr><tr><td>os.path.join(path1[, path2[, …]])</td><td>将多个路径组合后返回，第一个绝对路径之前的参数将被忽略</td></tr><tr><td>os.path.getatime(path)</td><td>返回path所指向的文件或者目录的最后访问时间</td></tr><tr><td>os.path.getmtime(path)</td><td>返回path所指向的文件或者目录的最后修改时间</td></tr><tr><td>os.path.getsize(path)</td><td>返回path的大小</td></tr></tbody></table><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> os<br><br><span class="hljs-built_in">print</span>(os.stat(<span class="hljs-string">&#x27;.\config&#x27;</span>)) <span class="hljs-comment"># 当前目录下的config文件的信息</span><br><br><span class="hljs-comment"># 运行结果</span><br><span class="hljs-comment"># os.stat_result(st_mode=33206, st_ino=2814749767208887, st_dev=1788857329,</span><br>st_nlink=<span class="hljs-number">1</span>, st_uid=<span class="hljs-number">0</span>, st_gid=<span class="hljs-number">0</span>, st_size=<span class="hljs-number">185</span>, st_atime=<span class="hljs-number">1550285376</span>,<br>st_mtime=<span class="hljs-number">1550285376</span>, st_ctime=<span class="hljs-number">1550285376</span>)<br></code></pre></td></tr></table></figure><table><thead><tr><th>st_mode</th><th>inode 保护模式</th></tr></thead><tbody><tr><td>st_ino</td><td>inode 节点号</td></tr><tr><td>st_dev</td><td>inode 驻留的设备</td></tr><tr><td>st_nlink</td><td>inode 的链接数</td></tr><tr><td>st_uid</td><td>所有者的用户ID</td></tr><tr><td>st_gid</td><td>所有者的组ID</td></tr><tr><td>st_size</td><td>普通文件以字节为单位的大小；包含等待某些特殊文件的数据</td></tr><tr><td>st_atime</td><td>上次访问的时间</td></tr><tr><td>st_mtime</td><td>最后一次修改的时间</td></tr><tr><td>st_ctime</td><td>由操作系统报告的&quot;ctime&quot;。在某些系统上（如Unix）是最新的元数据更改的时间， 在其它系统上（如Windows）是创建时间（详细信息参见平台的文档）</td></tr></tbody></table><h1>sys模块</h1><p>sys模块是与python解释器交互的一个接口</p><table><thead><tr><th>sys.argv</th><th>命令行参数List，第一个元素是程序本身路径，可以接收一些执行程序时传递的 参数</th></tr></thead><tbody><tr><td>sys.exit(n)</td><td>退出程序，正常退出时exit(0),错误退出sys.exit(1)</td></tr><tr><td>sys.version</td><td>获取Python解释程序的版本信息</td></tr><tr><td>sys.path</td><td>返回模块的搜索路径，初始化时使用PYTHONPATH环境变量的值</td></tr><tr><td>sys.platform</td><td>返回操作系统平台名称</td></tr></tbody></table><h1>re模块(用于网络爬虫)</h1><h2 id="正则表达式">正则表达式</h2><p>正则就是用一些具有特殊含义的符号组合到一起（称为正则表达式）来描述字符或者字符串的方法。或 者说：正则就是用来描述一类事物的规则。（在Python中）它内嵌在Python中，并通过 re 模块实现。 正则表达式模式被编译成一系列的字节码，然后由用 C 编写的匹配引擎执行</p><table><thead><tr><th style="text-align:left">元字符</th><th>匹配内容</th></tr></thead><tbody><tr><td style="text-align:left">\w</td><td>匹配字母（包含中文）或数字或下划线</td></tr><tr><td style="text-align:left">\W</td><td>匹配非字母（包含中文）或数字或下划线</td></tr><tr><td style="text-align:left">\s</td><td>匹配任意的空白符</td></tr><tr><td style="text-align:left">\S</td><td>匹配任意非空白符</td></tr><tr><td style="text-align:left">\d</td><td>匹配数字</td></tr><tr><td style="text-align:left">\D</td><td>匹配非数字</td></tr><tr><td style="text-align:left">\A</td><td>从字符串开头匹配</td></tr><tr><td style="text-align:left">\z</td><td>匹配字符串的结束，如果是换行，只匹配到换行前的结果</td></tr><tr><td style="text-align:left">\n</td><td>匹配一个换行符</td></tr><tr><td style="text-align:left">\t</td><td>匹配一个制表符</td></tr><tr><td style="text-align:left">^</td><td>匹配字符串的开始</td></tr><tr><td style="text-align:left">$</td><td>匹配字符串的结尾</td></tr><tr><td style="text-align:left">.</td><td>匹配任意字符，除了换行符，当re.DOTALL标记被指定时，则可以匹配包括换行符的任 意字符。</td></tr><tr><td style="text-align:left">[…]</td><td>匹配字符组中的字符</td></tr><tr><td style="text-align:left">[^…]</td><td>匹配除了字符组中的字符的所有字符</td></tr><tr><td style="text-align:left">*</td><td>匹配0个或者多个左边的字符。</td></tr><tr><td style="text-align:left">+</td><td>匹配一个或者多个左边的字符。</td></tr><tr><td style="text-align:left">?</td><td>匹配0个或者1个左边的字符，非贪婪方式。</td></tr><tr><td style="text-align:left">{n}</td><td>精准匹配n个前面的表达式。</td></tr><tr><td style="text-align:left">{n,m}</td><td>匹配n到m次由前面的正则表达式定义的片段，贪婪方式</td></tr><tr><td style="text-align:left">()</td><td>匹配括号内的表达式，也表示一个组</td></tr></tbody></table><h2 id="单字符匹配">单字符匹配</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> re<br><br><span class="hljs-built_in">print</span>(re.findall(<span class="hljs-string">&#x27;\w&#x27;</span>,<span class="hljs-string">&#x27;上大人123asdfg%^&amp;*(_ \t \n)&#x27;</span>))<br><span class="hljs-built_in">print</span>(re.findall(<span class="hljs-string">&#x27;\W&#x27;</span>,<span class="hljs-string">&#x27;上大人123asdfg%^&amp;*(_ \t \n)&#x27;</span>))<br><br><span class="hljs-built_in">print</span>(re.findall(<span class="hljs-string">&#x27;\s&#x27;</span>,<span class="hljs-string">&#x27;上大人123asdfg%^&amp;*(_ \t \n)&#x27;</span>))<br><span class="hljs-built_in">print</span>(re.findall(<span class="hljs-string">&#x27;\S&#x27;</span>,<span class="hljs-string">&#x27;上大人123asdfg%^&amp;*(_ \t \n)&#x27;</span>))<br><br><span class="hljs-built_in">print</span>(re.findall(<span class="hljs-string">&#x27;\d&#x27;</span>,<span class="hljs-string">&#x27;上大人123asdfg%^&amp;*(_ \t \n)&#x27;</span>))<br><span class="hljs-built_in">print</span>(re.findall(<span class="hljs-string">&#x27;\D&#x27;</span>,<span class="hljs-string">&#x27;上大人123asdfg%^&amp;*(_ \t \n)&#x27;</span>))<br><br><span class="hljs-built_in">print</span>(re.findall(<span class="hljs-string">&#x27;\A上大&#x27;</span>,<span class="hljs-string">&#x27;上大人123asdfg%^&amp;*(_ \t \n)&#x27;</span>))<br><span class="hljs-built_in">print</span>(re.findall(<span class="hljs-string">&#x27;^上大&#x27;</span>,<span class="hljs-string">&#x27;上大人123asdfg%^&amp;*(_ \t \n)&#x27;</span>))<br><br><span class="hljs-built_in">print</span>(re.findall(<span class="hljs-string">&#x27;666\z&#x27;</span>,<span class="hljs-string">&#x27;上大人123asdfg%^&amp;*(_ \t \n)666&#x27;</span>))<br><span class="hljs-built_in">print</span>(re.findall(<span class="hljs-string">&#x27;666\Z&#x27;</span>,<span class="hljs-string">&#x27;上大人123asdfg%^&amp;*(_ \t \n)666&#x27;</span>))<br><span class="hljs-built_in">print</span>(re.findall(<span class="hljs-string">&#x27;666$&#x27;</span>,<span class="hljs-string">&#x27;上大人123asdfg%^&amp;*(_ \t \n)666&#x27;</span>))<br><br><span class="hljs-built_in">print</span>(re.findall(<span class="hljs-string">&#x27;\n&#x27;</span>,<span class="hljs-string">&#x27;上大人123asdfg%^&amp;*(_ \t \n)&#x27;</span>))<br><span class="hljs-built_in">print</span>(re.findall(<span class="hljs-string">&#x27;\t&#x27;</span>,<span class="hljs-string">&#x27;上大人123asdfg%^&amp;*(_ \t \n)&#x27;</span>))<br></code></pre></td></tr></table></figure><h2 id="重复匹配">重复匹配</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> re<br><br><span class="hljs-built_in">print</span>(re.findall(<span class="hljs-string">&#x27;a.b&#x27;</span>, <span class="hljs-string">&#x27;ab aab a*b a2b a牛b a\nb&#x27;</span>))<br><span class="hljs-built_in">print</span>(re.findall(<span class="hljs-string">&#x27;a.b&#x27;</span>, <span class="hljs-string">&#x27;ab aab a*b a2b a牛b a\nb&#x27;</span>,re.DOTALL))<br><br><span class="hljs-built_in">print</span>(re.findall(<span class="hljs-string">&#x27;a?b&#x27;</span>, <span class="hljs-string">&#x27;ab aab abb aaaab a牛b aba**b&#x27;</span>))<br><br><span class="hljs-built_in">print</span>(re.findall(<span class="hljs-string">&#x27;a*b&#x27;</span>, <span class="hljs-string">&#x27;ab aab aaab abbb&#x27;</span>))<br><span class="hljs-built_in">print</span>(re.findall(<span class="hljs-string">&#x27;ab*&#x27;</span>, <span class="hljs-string">&#x27;ab aab aaab abbbbb&#x27;</span>))<br><br><span class="hljs-built_in">print</span>(re.findall(<span class="hljs-string">&#x27;a+b&#x27;</span>, <span class="hljs-string">&#x27;ab aab aaab abbb&#x27;</span>))<br><br><span class="hljs-built_in">print</span>(re.findall(<span class="hljs-string">&#x27;a&#123;2,4&#125;b&#x27;</span>, <span class="hljs-string">&#x27;ab aab aaab aaaaabb&#x27;</span>))<br><br><span class="hljs-built_in">print</span>(re.findall(<span class="hljs-string">&#x27;a.*b&#x27;</span>, <span class="hljs-string">&#x27;ab aab a*()b&#x27;</span>)) <span class="hljs-comment">#贪婪</span><br><span class="hljs-built_in">print</span>(re.findall(<span class="hljs-string">&#x27;a.*?b&#x27;</span>, <span class="hljs-string">&#x27;ab a1b a*()b, aaaaaab&#x27;</span>))<br><span class="hljs-comment"># .*? 此时的?不是对左边的字符进行0次或者1次的匹配,</span><br><span class="hljs-comment"># 而只是针对.*这种贪婪匹配的模式进行一种限定:告知他要遵从非贪婪匹配 推荐使用!</span><br><br><span class="hljs-comment"># []: 括号中可以放任意一个字符,一个中括号代表一个字符</span><br><span class="hljs-comment"># - 在[]中表示范围,如果想要匹配上- 那么这个-符号不能放在中间.</span><br><span class="hljs-comment"># ^ 在[]中表示取反的意思.</span><br><span class="hljs-built_in">print</span>(re.findall(<span class="hljs-string">&#x27;a.b&#x27;</span>, <span class="hljs-string">&#x27;a1b a3b aeb a*b arb a_b&#x27;</span>))<br><span class="hljs-built_in">print</span>(re.findall(<span class="hljs-string">&#x27;a[abc]b&#x27;</span>, <span class="hljs-string">&#x27;aab abb acb adb afb a_b&#x27;</span>))<br><span class="hljs-built_in">print</span>(re.findall(<span class="hljs-string">&#x27;a[0-9]b&#x27;</span>, <span class="hljs-string">&#x27;a1b a3b aeb a*b arb a_b&#x27;</span>))<br><span class="hljs-built_in">print</span>(re.findall(<span class="hljs-string">&#x27;a[a-z]b&#x27;</span>, <span class="hljs-string">&#x27;a1b a3b aeb a*b arb a_b&#x27;</span>))<br><span class="hljs-built_in">print</span>(re.findall(<span class="hljs-string">&#x27;a[a-zA-Z]b&#x27;</span>, <span class="hljs-string">&#x27;aAb aWb aeb a*b arb a_b&#x27;</span>))<br><span class="hljs-built_in">print</span>(re.findall(<span class="hljs-string">&#x27;a[0-9][0-9]b&#x27;</span>, <span class="hljs-string">&#x27;a11b a12b a34b a*b arb a_b&#x27;</span>))<br><span class="hljs-built_in">print</span>(re.findall(<span class="hljs-string">&#x27;a[*-+]b&#x27;</span>,<span class="hljs-string">&#x27;a-b a*b a+b a/b a6b&#x27;</span>))<br><span class="hljs-built_in">print</span>(re.findall(<span class="hljs-string">&#x27;a[-*+]b&#x27;</span>,<span class="hljs-string">&#x27;a-b a*b a+b a/b a6b&#x27;</span>))<br><span class="hljs-built_in">print</span>(re.findall(<span class="hljs-string">&#x27;a[^a-z]b&#x27;</span>, <span class="hljs-string">&#x27;acb adb a3b a*b&#x27;</span>))<br><br><span class="hljs-comment"># 分组：() 制定一个规则,将满足规则的结果匹配出来</span><br><span class="hljs-built_in">print</span>(re.findall(<span class="hljs-string">&#x27;(.*?)_sb&#x27;</span>, <span class="hljs-string">&#x27;cs_sb zhao_sb 日天_sb&#x27;</span>))<br><span class="hljs-built_in">print</span>(re.findall(<span class="hljs-string">&#x27;href=&quot;(.*?)&quot;&#x27;</span>,<span class="hljs-string">&#x27;&lt;a href=&quot;http://www.baidu.com&quot;&gt;点击&lt;/a&gt;&#x27;</span>))<br><br><span class="hljs-built_in">print</span>(re.findall(<span class="hljs-string">&#x27;compan(y|ies)&#x27;</span>,<span class="hljs-string">&#x27;Too many companies have gone bankrupt, and</span><br><span class="hljs-string">the next one is my company&#x27;</span>))<br><span class="hljs-built_in">print</span>(re.findall(<span class="hljs-string">&#x27;compan(?:y|ies)&#x27;</span>,<span class="hljs-string">&#x27;Too many companies have gone bankrupt,</span><br><span class="hljs-string">and the next one is my company&#x27;</span>))<br><span class="hljs-comment"># 分组() 中加入?: 表示将整体匹配出来而不只是()里面的内容</span><br></code></pre></td></tr></table></figure><h2 id="常用方法举例">常用方法举例</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> re<br><br><span class="hljs-comment"># findall 全部找到返回一个列表</span><br><span class="hljs-built_in">print</span>(re.findall(<span class="hljs-string">&#x27;a&#x27;</span>,<span class="hljs-string">&#x27;aghjmnbghagjmnbafgv&#x27;</span>))<br><br><span class="hljs-comment"># search 只到找到第一个匹配然后返回一个包含匹配信息的对象,该对象可以通过调用group()方法</span><br>得到匹配的字符串,如果字符串没有匹配，则返回<span class="hljs-literal">None</span><br><span class="hljs-built_in">print</span>(re.search(<span class="hljs-string">&#x27;sb|chensong&#x27;</span>, <span class="hljs-string">&#x27;chensong sb sb demon 日天&#x27;</span>))<br><span class="hljs-built_in">print</span>(re.search(<span class="hljs-string">&#x27;chensong&#x27;</span>, <span class="hljs-string">&#x27;chensong sb sb barry 日天&#x27;</span>).group())<br><br><span class="hljs-comment"># match：None,同search,不过在字符串开始处进行匹配,完全可以用search+^代替match</span><br><span class="hljs-built_in">print</span>(re.<span class="hljs-keyword">match</span>(<span class="hljs-string">&#x27;sb|chensong&#x27;</span>, <span class="hljs-string">&#x27;chensong sb sb demon 日天&#x27;</span>))<br><span class="hljs-built_in">print</span>(re.<span class="hljs-keyword">match</span>(<span class="hljs-string">&#x27;chensong&#x27;</span>, <span class="hljs-string">&#x27;chensong sb sb barry 日天&#x27;</span>).group())<br><br><span class="hljs-comment"># split 分割 可按照任意分割符进行分割,中括号里面写的所有符号都可以进行分割</span><br><span class="hljs-built_in">print</span>(re.split(<span class="hljs-string">&#x27;[:：,;；，]&#x27;</span>,<span class="hljs-string">&#x27;1;3,c,a：3&#x27;</span>))<br><br><span class="hljs-comment"># sub 替换</span><br><span class="hljs-built_in">print</span>(re.sub(<span class="hljs-string">&#x27;帅哥&#x27;</span>,<span class="hljs-string">&#x27;sb&#x27;</span>,<span class="hljs-string">&#x27;陈松是一个帅哥&#x27;</span>))<br><br><span class="hljs-comment"># complie 根据包含的正则表达式的字符串创建模式对象。可以实现更有效率的匹配。</span><br>obj = re.<span class="hljs-built_in">compile</span>(<span class="hljs-string">&#x27;\d&#123;2&#125;&#x27;</span>)<br><span class="hljs-built_in">print</span>(obj.search(<span class="hljs-string">&#x27;abc123eeee&#x27;</span>).group())<br><span class="hljs-built_in">print</span>(obj.findall(<span class="hljs-string">&#x27;1231232aasd&#x27;</span>))<br><br>ret = re.finditer(<span class="hljs-string">&#x27;\d&#x27;</span>,<span class="hljs-string">&#x27;asd123affess32432&#x27;</span>) <span class="hljs-comment"># finditer返回一个存放匹配结果的迭代器</span><br><span class="hljs-built_in">print</span>(ret)<br><span class="hljs-built_in">print</span>(<span class="hljs-built_in">next</span>(ret).group())<br><span class="hljs-built_in">print</span>(<span class="hljs-built_in">next</span>(ret).group())<br><span class="hljs-built_in">print</span>([i.group() <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> ret])<br></code></pre></td></tr></table></figure><h2 id="命名分组举例">命名分组举例</h2><p>命名分组匹配</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> re<br><br>ret = re.search(<span class="hljs-string">&quot;&lt;(?P&lt;tag_name&gt;\w+)&gt;\w+&lt;/(?P=tag_name)&gt;&quot;</span>,<span class="hljs-string">&quot;&lt;h1&gt;hello&lt;/h1&gt;&quot;</span>)<br><span class="hljs-comment">#利用?P的方式可以给匹配的东西添加一个标签名称，一次可以匹配多个内容，利用标签名称可以去取</span><br><span class="hljs-built_in">print</span>(ret.group(<span class="hljs-string">&#x27;tag_name&#x27;</span>))<br><span class="hljs-built_in">print</span>(ret.group())<br><br>ret = re.search(<span class="hljs-string">r&quot;&lt;(\w+)&gt;\w+&lt;/\1&gt;&quot;</span>,<span class="hljs-string">&quot;&lt;h1&gt;hello&lt;/h1&gt;&quot;</span>)<br><span class="hljs-comment"># 如果不给组起名字，也可以用\序号来找到对应的组，表示要找的内容和前面的组内容一致</span><br><span class="hljs-comment"># 获取的匹配结果可以直接用group(序号)拿到对应的值</span><br><span class="hljs-built_in">print</span>(ret.group(<span class="hljs-number">1</span>))<br><span class="hljs-built_in">print</span>(ret.group())<br></code></pre></td></tr></table></figure><p>利用re模块实现网络爬虫</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># 爬取小姐姐图片</span><br>https://www<span class="hljs-number">.3</span>gbizhi.com/meinv/index_1.html<br></code></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><code class="hljs python"><br><span class="hljs-comment"># 1.找个网站</span><br><span class="hljs-comment"># 2.找一下页面的规律</span><br><span class="hljs-comment"># 3.找一下图片链接和图片名</span><br><span class="hljs-comment"># 4.想办法下载</span><br><span class="hljs-keyword">import</span> os<br><span class="hljs-keyword">import</span> re<br><span class="hljs-keyword">from</span> urllib.request <span class="hljs-keyword">import</span> Request, urlopen, urlretrieve<br><br>path = os.getcwd() + os.sep + <span class="hljs-string">&quot;bizhi&quot;</span><br><br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">download</span>(<span class="hljs-params">n</span>):<br>    <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> os.path.isdir(path):<br>        os.makedirs(path)<br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>,n+<span class="hljs-number">1</span>):<br>        url=<span class="hljs-string">f&quot;https://www.3gbizhi.com/meinv/index_<span class="hljs-subst">&#123;<span class="hljs-built_in">str</span>(i)&#125;</span>.html&quot;</span><br>        <span class="hljs-built_in">print</span>(url)<br>        headers = &#123;<br>            <span class="hljs-string">&#x27;User-Agent&#x27;</span>: <span class="hljs-string">&#x27;Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/101.0.4951.64 Safari/537.36&#x27;</span><br>        &#125;<br>        request=Request(url=url,headers=headers)<br>        content=urlopen(request).read().decode(<span class="hljs-string">&quot;utf-8&quot;</span>)<br>        <span class="hljs-comment"># lazysrc=&quot;(.*?jpg)&quot;</span><br>        <span class="hljs-comment"># img alt=&quot;(.*?)&quot;</span><br>        link=re.findall(<span class="hljs-string">&#x27;lazysrc=&quot;(.*?jpg)&quot;&#x27;</span>,content)<br>        name=re.findall(<span class="hljs-string">&#x27;img alt=&quot;(.*?)&quot;&#x27;</span>,content)<br>        ziplist=<span class="hljs-built_in">list</span>(<span class="hljs-built_in">zip</span>(name,link))<br>        <span class="hljs-keyword">for</span> imgurl <span class="hljs-keyword">in</span> ziplist:<br>            urlretrieve(imgurl[<span class="hljs-number">1</span>],<span class="hljs-string">f&#x27;<span class="hljs-subst">&#123;path&#125;</span><span class="hljs-subst">&#123;os.sep&#125;</span><span class="hljs-subst">&#123;imgurl[<span class="hljs-number">0</span>]&#125;</span>.jpg&#x27;</span>)<br><span class="hljs-keyword">def</span> <span class="hljs-title function_">main</span>():<br>    n=<span class="hljs-built_in">int</span>(<span class="hljs-built_in">input</span>(<span class="hljs-string">&quot;请输入要下载的页数:&quot;</span>))<br>    download(n)<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;下载完成，请查看文件夹&quot;</span>)<br><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&#x27;__main__&#x27;</span>:<br>    main()<br></code></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># 爬取豆瓣top250</span><br>https://movie.douban.com/top250?start=<span class="hljs-number">0</span>&amp;<span class="hljs-built_in">filter</span>=<br></code></pre></td></tr></table></figure><h1>shutil模块</h1><p>高级的 文件、文件夹、压缩包 处理模块</p><h2 id="shutil-copyfileobj-fsrc-fdst-length">shutil.copyfileobj(fsrc, fdst[, length])</h2><p>将文件内容拷贝到另一个文件中</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> shutil<br><br>shutil.copyfileobj(<span class="hljs-built_in">open</span>(<span class="hljs-string">&#x27;config&#x27;</span>,<span class="hljs-string">&#x27;r&#x27;</span>),<span class="hljs-built_in">open</span>(<span class="hljs-string">&#x27;config.new&#x27;</span>,<span class="hljs-string">&#x27;w&#x27;</span>))<br></code></pre></td></tr></table></figure><h2 id="shutil-copyfile-src-dst">shutil.copyfile(src, dst)</h2><p>拷贝文件</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> shutil<br><br>shutil.copyfile(<span class="hljs-string">&#x27;config&#x27;</span>,<span class="hljs-string">&#x27;config1&#x27;</span>) <span class="hljs-comment"># 目标文件无需存在</span><br></code></pre></td></tr></table></figure><h2 id="shutil-copymode-src-dst">shutil.copymode(src, dst)</h2><p>仅拷贝权限。内容、组、用户均不变</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> shutil<br><br>shutil.copymode(<span class="hljs-string">&#x27;config&#x27;</span>,<span class="hljs-string">&#x27;config1&#x27;</span>) <span class="hljs-comment"># 目标文件必须存在</span><br></code></pre></td></tr></table></figure><h2 id="shutil-copystat-src-dst">shutil.copystat(src, dst)</h2><p>仅拷贝状态的信息，包括：mode bits, atime, mtime, flags</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> shutil<br><br>shutil.copystat(<span class="hljs-string">&#x27;config&#x27;</span>,<span class="hljs-string">&#x27;config1&#x27;</span>) <span class="hljs-comment"># 目标文件必须存在</span><br></code></pre></td></tr></table></figure><h2 id="shutil-copy-src-dst">shutil.copy(src, dst)</h2><p>拷贝文件和权限</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> shutil<br><br>shutil.copy(<span class="hljs-string">&#x27;config&#x27;</span>,<span class="hljs-string">&#x27;config1&#x27;</span>) <span class="hljs-comment"># 目标文件必须存在</span><br></code></pre></td></tr></table></figure><h2 id="shutil-ignore-patterns-patterns">shutil.ignore_patterns(*patterns)</h2><h2 id="shutil-copytree-src-dst-symlinks-False-ignore-None">shutil.copytree(src, dst, symlinks=False, ignore=None)</h2><p>递归的去拷贝文件夹</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> shutil<br><br>shutil.copytree(<span class="hljs-string">&#x27;folder1&#x27;</span>, <span class="hljs-string">&#x27;folder2&#x27;</span>, ignore=shutil.ignore_patterns(<span class="hljs-string">&#x27;*.pyc&#x27;</span>,<br><span class="hljs-string">&#x27;tmp*&#x27;</span>))<br><span class="hljs-comment"># 目标目录不能存在，注意对folder2目录父级目录要有可写权限，ignore的意思是排除</span><br><span class="hljs-comment"># 硬链接</span><br><br>shutil.copytree(<span class="hljs-string">&#x27;f1&#x27;</span>, <span class="hljs-string">&#x27;f2&#x27;</span>, symlinks=<span class="hljs-literal">True</span>,<br>ignore=shutil.ignore_patterns(<span class="hljs-string">&#x27;*.pyc&#x27;</span>, <span class="hljs-string">&#x27;tmp*&#x27;</span>))<br><span class="hljs-comment"># 软链接</span><br></code></pre></td></tr></table></figure><h2 id="shutil-rmtree-path-ignore-errors-onerror">shutil.rmtree(path[, ignore_errors[, onerror]])</h2><p>递归的去删除文件</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> shutil<br><br>shutil.rmtree(<span class="hljs-string">&#x27;folder1&#x27;</span>)<br></code></pre></td></tr></table></figure><h2 id="shutil-move-src-dst">shutil.move(src, dst)</h2><p>递归的去移动文件，它类似mv命令，其实就是重命名。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> shutil<br><br>shutil.move(<span class="hljs-string">&#x27;folder1&#x27;</span>, <span class="hljs-string">&#x27;folder3&#x27;</span>)<br></code></pre></td></tr></table></figure><h2 id="shutil-make-archive-base-name-format-…">shutil.make_archive(base_name, format,…)</h2><ul class="lvl-0"><li class="lvl-2"><p>创建压缩包并返回文件路径，例如：zip、tar</p><ul class="lvl-2"><li class="lvl-4">base_name： 压缩包的文件名，也可以是压缩包的路径。只是文件名时，则保存至当前目 录，否则保存至指定路径<ul class="lvl-4"><li class="lvl-6">如 data_bak =&gt;保存至当前路径</li><li class="lvl-6">如：/tmp/data_bak =&gt;保存至/tmp/</li></ul></li><li class="lvl-4">format： 压缩包种类，“zip”, “tar”, “bztar”，“gztar”</li><li class="lvl-4">root_dir： 要压缩的文件夹路径（默认当前目录）</li><li class="lvl-4">owner： 用户，默认当前用户</li><li class="lvl-4">group： 组，默认当前组</li><li class="lvl-4">logger： 用于记录日志，通常是logging.Logger对象</li></ul></li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># 将 /data 下的文件打包放置当前程序目录</span><br><span class="hljs-keyword">import</span> shutil<br>ret = shutil.make_archive(<span class="hljs-string">&quot;data_bak&quot;</span>, <span class="hljs-string">&#x27;gztar&#x27;</span>, root_dir=<span class="hljs-string">&#x27;/data&#x27;</span>)<br><br><span class="hljs-comment"># 将 /data下的文件打包放置 /tmp/目录</span><br><span class="hljs-keyword">import</span> shutil<br>ret = shutil.make_archive(<span class="hljs-string">&quot;/tmp/data_bak&quot;</span>, <span class="hljs-string">&#x27;gztar&#x27;</span>, root_dir=<span class="hljs-string">&#x27;/data&#x27;</span>)<br></code></pre></td></tr></table></figure><p>shutil 对压缩包的处理是调用 ZipFile 和 TarFile 两个模块来进行的</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> zipfile<br><br><span class="hljs-comment"># 压缩</span><br>z = zipfile.ZipFile(<span class="hljs-string">&#x27;laxi.zip&#x27;</span>, <span class="hljs-string">&#x27;w&#x27;</span>)<br>z.write(<span class="hljs-string">&#x27;a.log&#x27;</span>)<br>z.write(<span class="hljs-string">&#x27;data.data&#x27;</span>)<br>z.close()<br><br><span class="hljs-comment"># 解压</span><br>z = zipfile.ZipFile(<span class="hljs-string">&#x27;laxi.zip&#x27;</span>, <span class="hljs-string">&#x27;r&#x27;</span>)<br>z.extractall(path=<span class="hljs-string">&#x27;.&#x27;</span>)<br>z.close()<br></code></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> tarfile<br><br><span class="hljs-comment"># 压缩文件</span><br>t = tarfile.<span class="hljs-built_in">open</span>(<span class="hljs-string">&#x27;/tmp/egon.tar&#x27;</span>,<span class="hljs-string">&#x27;w&#x27;</span>)<br>t.add(<span class="hljs-string">&#x27;/test1/a.py&#x27;</span>,arcname=<span class="hljs-string">&#x27;a.bak&#x27;</span>)<br>t.add(<span class="hljs-string">&#x27;/test1/b.py&#x27;</span>,arcname=<span class="hljs-string">&#x27;b.bak&#x27;</span>)<br>t.close()<br><br><span class="hljs-comment"># 解压缩文件</span><br>t = tarfile.<span class="hljs-built_in">open</span>(<span class="hljs-string">&#x27;/tmp/egon.tar&#x27;</span>,<span class="hljs-string">&#x27;r&#x27;</span>)<br>t.extractall(<span class="hljs-string">&#x27;/egon&#x27;</span>)<br>t.close()<br></code></pre></td></tr></table></figure></div><hr><div><div class="post-metas my-3"><div class="post-meta mr-3 d-flex align-items-center"><i class="iconfont icon-category"></i> <span class="category-chains"><span class="category-chain"><a href="/categories/Python/" class="category-chain-item">Python</a></span></span></div><div class="post-meta"><i class="iconfont icon-tags"></i> <a href="/tags/Python%E5%AD%A6%E4%B9%A0/">#Python学习</a></div></div><div class="license-box my-3"><div class="license-title"><div>Python常用模块</div><div>https://xiaolaji.site/20221001/Python常用模块/</div></div><div class="license-meta"><div class="license-meta-item"><div>Author</div><div>Xiaolaji</div></div><div class="license-meta-item license-meta-date"><div>Posted on</div><div>October 1, 2022</div></div><div class="license-meta-item"><div>Licensed under</div><div><a target="_blank" href="https://creativecommons.org/licenses/by-nc-sa/4.0/"><span class="hint--top hint--rounded" aria-label="BY - Attribution"><i class="iconfont icon-by"></i> </span></a><a target="_blank" href="https://creativecommons.org/licenses/by-nc-sa/4.0/"><span class="hint--top hint--rounded" aria-label="NC - Non-commercial"><i class="iconfont icon-nc"></i> </span></a><a target="_blank" href="https://creativecommons.org/licenses/by-nc-sa/4.0/"><span class="hint--top hint--rounded" aria-label="SA - Share-alike"><i class="iconfont icon-sa"></i></span></a></div></div></div><div class="license-icon iconfont"></div></div><div class="post-prevnext my-3"><article class="post-prev col-6"><a href="/20221001/Python%E5%BC%82%E5%B8%B8%E5%A4%84%E7%90%86/" title="Python异常处理"><i class="iconfont icon-arrowleft"></i> <span class="hidden-mobile">Python异常处理</span> <span class="visible-mobile">Previous</span></a></article><article class="post-next col-6"><a href="/20220930/Python%E4%B8%AD%E7%9A%84%E6%A8%A1%E5%9D%97%E5%92%8C%E5%8C%85/" title="Python中的模块和包"><span class="hidden-mobile">Python中的模块和包</span> <span class="visible-mobile">Next</span> <i class="iconfont icon-arrowright"></i></a></article></div></div><article id="comments" lazyload><div id="waline"></div><script type="text/javascript">Fluid.utils.loadComments("#waline",function(){Fluid.utils.createCssLink("https://lib.baomitu.com/waline/2.14.1/waline.min.css"),Fluid.utils.createScript("https://lib.baomitu.com/waline/2.14.1/waline.min.js",function(){var i=Object.assign({serverURL:"https://api.xiaolaji.site/",path:"window.location.pathname",meta:["nick","mail","link"],requiredMeta:["nick"],lang:"zh-CN",emoji:["https://unpkg.com/@waline/emojis@1.1.0/tw-emoji"],dark:'html[data-user-color-scheme="dark"]',wordLimit:0,pageSize:10},{el:"#waline",path:window.location.pathname});Waline.init(i),Fluid.utils.waitElementVisible("#waline .vcontent",()=>{var i="#waline .vcontent img:not(.vemoji)";Fluid.plugins.imageCaption(i),Fluid.plugins.fancyBox(i)})})})</script><noscript>Please enable JavaScript to view the comments</noscript></article></article></div></div></div><div class="side-col d-none d-lg-block col-lg-2"><aside class="sidebar" style="margin-left:-1rem"><div id="toc"><p class="toc-header"><i class="iconfont icon-list"></i> <span>Table of Contents</span></p><div class="toc-body" id="toc-body"></div></div></aside></div></div></div><a id="scroll-top-button" aria-label="TOP" href="#" role="button"><i class="iconfont icon-arrowup" aria-hidden="true"></i></a><div class="modal fade" id="modalSearch" tabindex="-1" role="dialog" aria-labelledby="ModalLabel" aria-hidden="true"><div class="modal-dialog modal-dialog-scrollable modal-lg" role="document"><div class="modal-content"><div class="modal-header text-center"><h4 class="modal-title w-100 font-weight-bold">Search</h4><button type="button" id="local-search-close" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button></div><div class="modal-body mx-3"><div class="md-form mb-5"><input type="text" id="local-search-input" class="form-control validate"> <label data-error="x" data-success="v" for="local-search-input">Keyword</label></div><div class="list-group" id="local-search-result"></div></div></div></div></div></main><footer><div class="footer-inner"><div class="footer-content"><a href="https://hexo.io" target="_blank" rel="nofollow noopener"><span>Hexo</span></a> <i class="iconfont icon-love"></i> <a href="https://github.com/fluid-dev/hexo-theme-fluid" target="_blank" rel="nofollow noopener"><span>Fluid</span></a></div><div class="statistics"><span id="busuanzi_container_site_pv" style="display:none">Views: <span id="busuanzi_value_site_pv"></span> </span><span id="busuanzi_container_site_uv" style="display:none">Visitors: <span id="busuanzi_value_site_uv"></span></span></div><div class="beian"><span><a href="http://beian.miit.gov.cn/" target="_blank" rel="nofollow noopener">苏ICP备2022037338号-1</a></span></div></div></footer><script src="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.js"></script><link rel="stylesheet" href="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.css"><script>NProgress.configure({showSpinner:!1,trickleSpeed:100}),NProgress.start(),window.addEventListener("load",function(){NProgress.done()})</script><script src="https://lib.baomitu.com/jquery/3.6.0/jquery.min.js"></script><script src="https://lib.baomitu.com/twitter-bootstrap/4.6.1/js/bootstrap.min.js"></script><script src="/js/events.js"></script><script src="/js/plugins.js"></script><script src="https://lib.baomitu.com/typed.js/2.0.12/typed.min.js"></script><script>!function(t){var e=Fluid.plugins.typing,t=t.getElementById("subtitle");t&&e&&e(t.getAttribute("data-typed-text"))}((window,document))</script><script src="/js/img-lazyload.js"></script><script>Fluid.utils.createScript("https://lib.baomitu.com/tocbot/4.18.2/tocbot.min.js",function(){var t,o=jQuery("#toc");0!==o.length&&window.tocbot&&(t=jQuery("#board-ctn").offset().top,window.tocbot.init(Object.assign({tocSelector:"#toc-body",contentSelector:".markdown-body",linkClass:"tocbot-link",activeLinkClass:"tocbot-active-link",listClass:"tocbot-list",isCollapsedClass:"tocbot-is-collapsed",collapsibleClass:"tocbot-is-collapsible",scrollSmooth:!0,includeTitleTags:!0,headingsOffset:-t},CONFIG.toc)),0<o.find(".toc-list-item").length&&o.css("visibility","visible"),Fluid.events.registerRefreshCallback(function(){var t;"tocbot"in window&&(tocbot.refresh(),0!==(t=jQuery("#toc")).length)&&tocbot&&0<t.find(".toc-list-item").length&&t.css("visibility","visible")}))})</script><script src="https://lib.baomitu.com/clipboard.js/2.0.11/clipboard.min.js"></script><script>Fluid.plugins.codeWidget()</script><script>Fluid.utils.createScript("https://lib.baomitu.com/anchor-js/4.3.1/anchor.min.js",function(){window.anchors.options={placement:CONFIG.anchorjs.placement,visible:CONFIG.anchorjs.visible},CONFIG.anchorjs.icon&&(window.anchors.options.icon=CONFIG.anchorjs.icon);var n,o=[];for(n of(CONFIG.anchorjs.element||"h1,h2,h3,h4,h5,h6").split(","))o.push(".markdown-body > "+n.trim());"left"===CONFIG.anchorjs.placement&&(window.anchors.options.class="anchorjs-link-left"),window.anchors.add(o.join(", ")),Fluid.events.registerRefreshCallback(function(){if("anchors"in window){anchors.removeAll();var n,o=[];for(n of(CONFIG.anchorjs.element||"h1,h2,h3,h4,h5,h6").split(","))o.push(".markdown-body > "+n.trim());"left"===CONFIG.anchorjs.placement&&(anchors.options.class="anchorjs-link-left"),anchors.add(o.join(", "))}})})</script><script>Fluid.utils.createScript("https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.js",function(){Fluid.plugins.fancyBox()})</script><script>Fluid.plugins.imageCaption()</script><script defer src="/js/leancloud.js"></script><script src="/js/local-search.js"></script><script defer src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script src="/js/boot.js"></script><noscript><div class="noscript-warning">Blog works best with JavaScript enabled</div></noscript></body></html>